<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nepo Super App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-color: #2563eb; /* Blue 600 */
            --secondary-color: #f59e0b; /* Amber 500 */
            --background-color: #f8fafc; /* Slate 50 */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
        }

        .header-gradient {
            background: linear-gradient(135deg, var(--primary-color) 0%, #1e40af 100%);
        }

        .service-card {
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .service-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Custom scrollbar for mobile feel */
        .scrollable-content::-webkit-scrollbar {
            width: 4px;
        }

        .scrollable-content::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 2px;
        }

        .modal {
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .modal-content {
            transition: transform 0.3s ease;
        }

        .modal.hidden .modal-content {
            transform: scale(0.9);
        }

        /* --- New Construction Effect CSS --- */
        @keyframes stripes-move {
            0% { background-position: 0 0; }
            100% { background-position: 40px 0; }
        }

        .construction-effect {
            /* Yellow/Orange striped background */
            background-image: repeating-linear-gradient(
                45deg,
                #fcd34d 0, /* Amber 300 */
                #fcd34d 10px,
                #fcd34d 10px, /* Amber 300 */
                #f59e0b 20px /* Amber 500 */
            );
            background-size: 40px 40px;
            animation: stripes-move 0.7s linear infinite;
            border-color: #f59e0b;
            color: #78350f; /* Dark brown text for contrast */
        }
        /* --- End Construction Effect CSS */
    </style>
</head>
<body class="min-h-screen antialiased">

    <script type="module">
        // IMPORTANT: These imports are required for Firebase/Firestore functionality
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, addDoc, setDoc, updateDoc, deleteDoc, onSnapshot, collection, query, where, serverTimestamp, setLogLevel, getDocs } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- FIREBASE CONFIGURATION FIX ---
        // Global variables for Canvas environment. Must be declared for demo/real mode.
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {
            apiKey: "YOUR_API_KEY_HERE", 
            authDomain: "nepo-super-app-demo.firebaseapp.com",
            projectId: "nepo-super-app-demo",
            storageBucket: "nepo-super-app-demo.appspot.com",
            messagingSenderId: "1234567890",
            appId: "1:1234567890:web:abcdefg12345"
        };
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        const appId = typeof __app_id !== 'undefined' ? __app_id : firebaseConfig.projectId; 
        
        let db, auth;
        let userId = 'demo-user-' + Math.random().toString(36).substring(2, 10);
        let isAuthReady = false;
        let isFirebaseActive = false;
        // --- END FIREBASE CONFIGURATION FIX ---

        // Set log level for debugging
        setLogLevel('Debug');

        // --- Service Definitions ---
        const serviceMap = {
            news: { name: 'Nepo News', icon: 'fa-newspaper', color: 'bg-red-600' },
            calendar: { name: 'Nepo Calendar', icon: 'fa-calendar-days', color: 'bg-orange-600' },
            driving: { name: 'Nepo Driving', icon: 'fa-car-side', color: 'bg-indigo-600' },
            care: { name: 'Nepo Care', icon: 'fa-hand-holding-medical', color: 'bg-teal-600' },
            secondhand: { name: 'Nepo Second-Hand Market', icon: 'fa-tags', color: 'bg-green-600' },
            shopping: { name: 'Nepo Online Shopping', icon: 'fa-bag-shopping', color: 'bg-purple-600' },
            visa: { name: 'Nepo Visa Check', icon: 'fa-passport', color: 'bg-blue-600' },
            donation: { name: 'Nepo Donation', icon: 'fa-hand-holding-heart', color: 'bg-pink-600' },
            roomrent: { name: 'Nepo Room Rent', icon: 'fa-house-chimney', color: 'bg-yellow-600' },
            jobs: { name: 'Nepo Part-Time Job', icon: 'fa-briefcase', color: 'bg-gray-600' },
        };

        const newsSources = [
            'https://www.onlinekhabar.com/', 
            'https://myrepublica.nagariknetwork.com/', 
            'https://kathmandupost.com/', 
            'https://nepalitimes.com/', 
            'https://www.thehimalayantimes.com/', 
            'https://annapurnapost.com/', 
            'https://ekantipur.com/', 
            'https://www.setopati.com/', 
            'https://www.ratopati.com/', 
            'https://www.himalkhabar.com/'
        ];
        
        // Function to get a random news source URL
        const getRandomSourceUrl = () => newsSources[Math.floor(Math.random() * newsSources.length)];

        // --- Mock Data ---
        const forecastMessages = [
            { icon: 'fa-cloud-showers-heavy', message: 'Heavy Rain Alert: Use your umbrella!', color: 'text-blue-300' },
            { icon: 'fa-sun', message: 'Hot & Sunny: Stay hydrated today!', color: 'text-yellow-300' },
            { icon: 'fa-smog', message: 'Air Quality Alert: Minimize outdoor activities.', color: 'text-gray-400' },
            { icon: 'fa-cloud', message: 'Partly cloudy, pleasant weather for travel.', color: 'text-gray-200' },
            { icon: 'fa-cloud-rain', message: 'Light Drizzle: Carry light rain gear.', color: 'text-blue-300' },
            { icon: 'fa-mountain', message: 'Clear Mountain Views: Great trekking weather.', color: 'text-green-300' },
            { icon: 'fa-temperature-low', message: 'Cold Morning: Wear warm layers if heading out early.', color: 'text-cyan-300' }
        ];

        const sevenDayForecast = [
            { day: "Today", condition: "Light Drizzle", temp: "18┬░ / 12┬░ C", wind: "10 km/h", icon: "fa-cloud-rain" },
            { day: "Wed", condition: "Heavy Rain", temp: "15┬░ / 10┬░ C", wind: "15 km/h", icon: "fa-cloud-showers-heavy" },
            { day: "Thu", condition: "Partly Sunny", temp: "21┬░ / 13┬░ C", wind: "8 km/h", icon: "fa-cloud-sun" },
            { day: "Fri", condition: "Clear", temp: "23┬░ / 14┬░ C", wind: "5 km/h", icon: "fa-sun" },
            { day: "Sat", condition: "Smog", temp: "19┬░ / 11┬░ C", wind: "3 km/h", icon: "fa-smog" },
            { day: "Sun", condition: "Cloudy", temp: "17┬░ / 10┬░ C", wind: "12 km/h", icon: "fa-cloud" },
            { day: "Mon", condition: "Light Wind", temp: "20┬░ / 12┬░ C", wind: "7 km/h", icon: "fa-wind" }
        ];

        // --- UPDATED: 10 Driving Examples ---
        const nepoDrivingPastExamples = [
            { pickup: "Thamel", dropoff: "Tribhuvan Airport", status: "Completed", type: "Car", cost: 850 },
            { pickup: "Lalitpur", dropoff: "Boudhanath Stupa", status: "Completed", type: "Bike", cost: 250 },
            { pickup: "Baneshwor", dropoff: "Patan Durbar Square", status: "Completed", type: "Carpool", cost: 320 },
            { pickup: "Gongabu", dropoff: "New Road", status: "Completed", type: "Car", cost: 480 },
            { pickup: "Teku", dropoff: "Kirtipur Hill", status: "Completed", type: "Premium", cost: 1100 },
            // Added 5 more
            { pickup: "Pokhara Lakeside", dropoff: "Pokhara Airport", status: "Completed", type: "Car", cost: 950 },
            { pickup: "Dharan Buspark", dropoff: "Bhedetar", status: "Completed", type: "Bike", cost: 300 },
            { pickup: "Buddhanagar", dropoff: "Maitidevi", status: "Completed", type: "Carpool", cost: 210 },
            { pickup: "Jhamsikhel", dropoff: "Balaju", status: "Completed", type: "Premium", cost: 1300 },
            { pickup: "Bhaktapur", dropoff: "Sanga Hill", status: "Completed", type: "Car", cost: 720 }
        ];

        // --- UPDATED: 10 News Examples (First one replaced with the full Nepali article) ---
        const nepoNewsFullArticle = `
            <div class="space-y-4 text-gray-800">
                <p class="text-xs text-gray-500 font-medium">Published: 1 hr ago | Source: рдкреНрд░рд╡рд┐рдзрд┐ рд╡рд┐рд╢реНрд▓реЗрд╖рдХрд╣рд░реВ</p>
                <h3 class="text-3xl font-extrabold text-red-600">ЁЯУ░ 'рдиреЗрдкреЛ рд╕реБрдкрд░ рдПрдк' рдХреЛ рднрд╡рд┐рд╖реНрдпрдГ рдбрд┐рдЬрд┐рдЯрд▓ рдиреЗрдкрд╛рд▓рдХреЛ рдПрдХреАрдХрд░рдгрддрд░реНрдл рдПрдХ рдХреНрд░рд╛рдиреНрддрд┐рдХрд╛рд░реА рдлрдбреНрдХреЛ</h3>
                
                <p class="text-lg font-medium border-l-4 border-red-400 pl-3">рдХрд╛рдардорд╛рдбреМрдБ тАУ рдиреЗрдкрд╛рд▓рдХреЛ рдбрд┐рдЬрд┐рдЯрд▓ рдмрдЬрд╛рд░рдорд╛ рдареВрд▓реЛ рдкрд░рд┐рд╡рд░реНрддрди рд▓реНрдпрд╛рдЙрди рд╕рдХреНрдиреЗ рд╕рдореНрднрд╛рд╡реНрдпрддрд╛ рдмреЛрдХреЗрдХреЛ 'рдиреЗрдкреЛ рд╕реБрдкрд░ рдПрдк' (Nepo Super App) рдХреЛ рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдкрд▓реЗ рдкреНрд░рд╡рд┐рдзрд┐ рд╡рд┐рд╢реНрд▓реЗрд╖рдХрд╣рд░реВ рд░ рдЙрджреНрдпрдореАрд╣рд░реВрдХреЛ рдзреНрдпрд╛рди рдЦрд┐рдЪреЗрдХреЛ рдЫред рдмреАрдкреАрди рд╣рдорд╛рд▓рдХреЛ рдиреЗрддреГрддреНрд╡рдорд╛ рд╡рд┐рдХрд╕рд┐рдд рднрдЗрд░рд╣реЗрдХреЛ рдпреЛ рдПрдк рдпрджрд┐ рдкреВрд░реНрдг рд░реВрдкрдорд╛ рдирд┐рд░реНрдорд╛рдг рднрдИ рд╕рдиреН реирежреирео рдХреЛ рдЕрдиреНрддреНрдпрд╕рдореНрдордорд╛ рдмрдЬрд╛рд░рдорд╛ рдЖрдпреЛ рднрдиреЗ рдпрд╕рд▓реЗ рдиреЗрдкрд╛рд▓реАрд╣рд░реВрдХреЛ рджреИрдирд┐рдХ рдЬреАрд╡рдирд▓рд╛рдИ рд╕рд░рд▓ рд░ рдбрд┐рдЬрд┐рдЯрд▓ рдЕрд░реНрдерддрдиреНрддреНрд░рд▓рд╛рдИ рд╡реНрдпрд╛рдкрдХ рдмрдирд╛рдЙрдиреЗ рджреЗрдЦрд┐рдПрдХреЛ рдЫред</p>

                <p class="text-sm">рд╡рд┐рдЬреНрдЮрд╣рд░реВрдХрд╛ рдЕрдиреБрд╕рд╛рд░, резрез рднрдиреНрджрд╛ рдмрдвреА рдЕрддреНрдпрд╛рд╡рд╢реНрдпрдХ рд╕реЗрд╡рд╛рд╣рд░реВрд▓рд╛рдИ рдПрдХреИ рдкреНрд▓реЗрдЯрдлрд░реНрдордорд╛ рд╕рдореЗрдЯреНрдиреЗ рдиреЗрдкреЛ рдПрдкрдХреЛ рдпреЛ рдПрдХреАрдХреГрдд рдЕрд╡рдзрд╛рд░рдгрд╛ (Unified Ecosystem) рдиреЗрдкрд╛рд▓рдХреЛ рдбрд┐рдЬрд┐рдЯрд▓ рдЗрдХреЛрд╕рд┐рд╕реНрдЯрдордХрд╛ рд▓рд╛рдЧрд┐ рдЧреЗрдо-рдЪреЗрдиреНрдЬрд░ рд╕рд╛рдмрд┐рдд рд╣реБрди рд╕рдХреНрдЫред</p>

                <h4 class="text-xl font-bold text-gray-900 pt-2 border-t border-gray-200">рдбрд┐рдЬрд┐рдЯрд▓ рд░реВрдкрд╛рдиреНрддрд░рдгрдХрд╛ рдореБрдЦреНрдп рдЖрдзрд╛рд░рд╣рд░реВ</h4>

                <h5 class="text-lg font-semibold text-red-700">рез. рд╡рд┐рддреНрддреАрдп рдкрд╣реБрдБрдЪ рд░ рдбрд┐рдЬрд┐рдЯрд▓ рдХрд╛рд░реЛрдмрд╛рд░рдорд╛ рдХреНрд░рд╛рдиреНрддрд┐ ЁЯТ╕</h5>
                <p class="text-sm"> 'рдорд╛рдЗ рд╡рд╛рд▓реЗрдЯ' (My Wallet) рд╕реБрд╡рд┐рдзрд╛рд▓реЗ рдиреЗрдкрд╛рд▓рдорд╛ рд╡рд┐рддреНрддреАрдп рд╕рдорд╛рд╡реЗрд╢рд┐рддрд╛рд▓рд╛рдИ рддреАрд╡реНрд░ рдкрд╛рд░реНрдиреЗрдЫред рд░рд╛рдЗрдб-рд╣реЗрд▓рд┐рдЩ, рдЕрдирд▓рд╛рдЗрди рдХрд┐рдирдореЗрд▓, рд░ рдпреБрдЯрд┐рд▓рд┐рдЯреА рднреБрдХреНрддрд╛рдиреАрдЬрд╕реНрддрд╛ рд╕реЗрд╡рд╛рд╣рд░реВ рд╡рд╛рд▓реЗрдЯрд╕рдБрдЧреИ рдЬреЛрдбрд┐рдПрд░ рдЖрдЙрдБрджрд╛ рднреБрдХреНрддрд╛рдиреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдирд┐рдХреИ рд╕рд░рд▓ рд╣реБрдиреЗрдЫред</p>
                <ul class="list-disc pl-5 text-sm space-y-1 ml-2">
                    <li><span class="font-medium text-indigo-600">рдирдЧрджрд╡рд┐рд╣реАрди рдЕрд░реНрдерддрдиреНрддреНрд░рд▓рд╛рдИ рдмрдврд╛рд╡рд╛:</span> рдПрдХреАрдХреГрдд рдбрд┐рдЬрд┐рдЯрд▓ рд╡рд╛рд▓реЗрдЯрд▓реЗ рдЧреНрд░рд╛рдореАрдг рддрдерд╛ рд╕рд╣рд░реА рджреБрд╡реИ рдХреНрд╖реЗрддреНрд░рдорд╛ рдирдЧрджрдорд╛рдерд┐рдХреЛ рдирд┐рд░реНрднрд░рддрд╛ рдХрдо рдЧрд░реА рдбрд┐рдЬрд┐рдЯрд▓ рднреБрдХреНрддрд╛рдиреАрдХреЛ рдкреНрд░рдЪрд▓рдирд▓рд╛рдИ рд╡реНрдпрд╛рдкрдХ рдмрдирд╛рдЙрдиреЗрдЫред</li>
                    <li><span class="font-medium text-indigo-600">рдИ-рдХрдорд░реНрд╕рдХреЛ рд╡рд┐рд╕реНрддрд╛рд░:</span> 'рдиреЗрдкреЛ рдЕрдирд▓рд╛рдЗрди рд╕рдкрд┐рдЩ' рд░ 'рд╕реЗрдХреЗрдиреНрдб-рд╣реНрдпрд╛рдиреНрдб рдорд╛рд░реНрдХреЗрдЯ' рдЬрд╕реНрддрд╛ рд╕реБрд╡рд┐рдзрд╛рд▓реЗ рд╕рд╛рдирд╛ рд░ рд╕реНрдерд╛рдиреАрдп рд╡реНрдпрд╡рд╕рд╛рдпрд╣рд░реВрд▓рд╛рдИ рдареВрд▓реЛ рдЧреНрд░рд╛рд╣рдХ рдЖрдзрд╛рд░рдорд╛ рдкреБрдЧреНрди рдорджреНрджрдд рдЧрд░реНрдиреЗрдЫ, рдЬрд╕рд▓реЗ рдиреЗрдкрд╛рд▓рдХреЛ рдИ-рдХрдорд░реНрд╕ рдмрдЬрд╛рд░рдХреЛ рддреАрд╡реНрд░ рд╡реГрджреНрдзрд┐рд▓рд╛рдИ рд╕рд╣рдпреЛрдЧ рдкреБрд░реНтАНрдпрд╛рдЙрдиреЗрдЫред</li>
                </ul>

                <h5 class="text-lg font-semibold text-red-700">реи. рдпрд╛рддрд╛рдпрд╛рдд, рд░реЛрдЬрдЧрд╛рд░реА рд░ рд╕рд╣рд░реА рд╡рд┐рдХрд╛рд╕рдорд╛ рд╕реБрдзрд╛рд░ ЁЯЫ╡</h5>
                <p class="text-sm"> 'рдиреЗрдкреЛ рдбреНрд░рд╛рдЗрднрд┐рдЩ' (Nepo Driving) рд╕реЗрд╡рд╛рдХреЛ рд╕рдлрд▓ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрдирд▓реЗ рдЙрдкрднреЛрдХреНрддрд╛рд▓рд╛рдИ рднрд░рдкрд░реНрджреЛ рд░ рд╕реБрд░рдХреНрд╖рд┐рдд рдпрд╛рддрд╛рдпрд╛рддрдХреЛ рд╡рд┐рдХрд▓реНрдк рджрд┐рдиреЗрдЫред</p>
                <ul class="list-disc pl-5 text-sm space-y-1 ml-2">
                    <li><span class="font-medium text-indigo-600">рд╕реБрд▓рднрддрд╛ рд░ рд░реЛрдЬрдЧрд╛рд░реА:</span> рдпрд╕рд▓реЗ рд░рд╛рдЗрдбрд░рд╣рд░реВрдХрд╛ рд▓рд╛рдЧрд┐ рдареВрд▓реЛ рд╕рдВрдЦреНрдпрд╛рдорд╛ рд░реЛрдЬрдЧрд╛рд░реАрдХрд╛ рдЕрд╡рд╕рд░рд╣рд░реВ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреЗрдЫ, рдЬреБрди рдПрдкрдорд╛ рд░рд╣реЗрдХреЛ 'рдкрд╛рд░реНрдЯ-рдЯрд╛рдЗрдо рдЬрдм' (Part-Time Job) рдмреЛрд░реНрдбрд╕рдБрдЧ рдорд┐рд▓реЗрд░ рдХрд╛рдо рдЦреЛрдЬреНрдиреЗрд╣рд░реВрд▓рд╛рдИ рдердк рд╕реБрд╡рд┐рдзрд╛ рдкреБрдЧреНрдиреЗрдЫред</li>
                    <li><span class="font-medium text-indigo-600">рдпрд╛рддрд╛рдпрд╛рдд рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди:</span> рдПрдХреАрдХреГрдд рд░рд╛рдЗрдб-рд╣реЗрд▓рд┐рдЩ рдкреНрд░рдгрд╛рд▓реАрд▓реЗ рд╕рд╣рд░реА рдХреНрд╖реЗрддреНрд░рдХреЛ рдпрд╛рддрд╛рдпрд╛рдд рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдирдорд╛ рд╕реБрдзрд╛рд░ рд▓реНрдпрд╛рдЙрдиреБрдХрд╛ рд╕рд╛рдереИ рдпрд╛рддреНрд░реБрд╣рд░реВрд▓рд╛рдИ рд╕рд╣реА рд╕рдордпрдорд╛ рд╕реЗрд╡рд╛ рдЙрдкрд▓рдмреНрдз рдЧрд░рд╛рдЙрди рдорджреНрджрдд рдЧрд░реНрдиреЗрдЫред</li>
                </ul>

                <h5 class="text-lg font-semibold text-red-700">рей. рд╕реНрд╡рд╛рд╕реНрдереНрдп, рд╕рдЪреЗрддрдирд╛ рд░ рд╕рд╛рдорд╛рдЬрд┐рдХ рдЙрддреНрддрд░рджрд╛рдпрд┐рддреНрд╡ тЭдя╕П</h5>
                <p class="text-sm">рд╕реНрд╡рд╛рд╕реНрдереНрдп рд╕реЗрд╡рд╛ рд░ рд╕рд╛рдорд╛рдЬрд┐рдХ рдХрд▓реНрдпрд╛рдгрд╕рдБрдЧ рд╕рдореНрдмрдиреНрдзрд┐рдд рд╕реЗрд╡рд╛рд╣рд░реВрд▓реЗ рд╕рд╛рдорд╛рдЬрд┐рдХ рд╕реНрддрд░рдорд╛ рд╕рдХрд╛рд░рд╛рддреНрдордХ рдкреНрд░рднрд╛рд╡ рдкрд╛рд░реНрдиреЗрдЫред</p>
                <ul class="list-disc pl-5 text-sm space-y-1 ml-2">
                    <li><span class="font-medium text-indigo-600">рд╕реНрд╡рд╛рд╕реНрдереНрдп рд╕реВрдЪрдирд╛рдорд╛ рдкрд╣реБрдБрдЪ:</span> 'рдиреЗрдкреЛ рдХреЗрдпрд░' (Nepo Care) рднрд┐рддреНрд░рдХреЛ рд░реЛрдЧ рд╕рдЪреЗрддрдирд╛ рд╕реБрд╡рд┐рдзрд╛рд▓реЗ рдиреЗрдкрд╛рд▓реА рд░ рдЕрдВрдЧреНрд░реЗрдЬреА рджреБрд╡реИ рднрд╛рд╖рд╛рдорд╛ реиреж рднрдиреНрджрд╛ рдмрдвреА рд╕рд╛рдорд╛рдиреНрдп рд░реЛрдЧрд╣рд░реВрдХреЛ рд░реЛрдХрдерд╛рдо рд░ рдЙрдкрдЪрд╛рд░рдмрд╛рд░реЗ рдЬрд╛рдирдХрд╛рд░реА рджрд┐рдиреЗрдЫред рдлрд╛рд░реНрдореЗрд╕реА рд╕реНрдЯрдХ рд░ рдореВрд▓реНрдпрдХреЛ рдЦреЛрдЬреА рдЧрд░реНрдиреЗ рд╕реБрд╡рд┐рдзрд╛рд▓реЗ рдФрд╖рдзрд┐рдХреЛ рдЙрдкрд▓рдмреНрдзрддрд╛ рд╕рд╣рдЬ рдмрдирд╛рдЙрдиреЗрдЫред</li>
                    <li><span class="font-medium text-indigo-600">рдкрд╛рд░рджрд░реНрд╢реА рджрд╛рди:</span> 'рдиреЗрдкреЛ рдбреЛрдиреЗрд╕рди' (Nepo Donation) рд╕реБрд╡рд┐рдзрд╛рд▓реЗ рдкреНрд░рдпреЛрдЧрдХрд░реНрддрд╛рд╣рд░реВрд▓рд╛рдИ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рд░ рдкрд╛рд░рджрд░реНрд╢реА рдорд╛рдзреНрдпрдордмрд╛рдЯ рд╕реНрдерд╛рдиреАрдп рдкрд░реЛрдкрдХрд╛рд░реА рдХрд╛рд░реНрдпрд╣рд░реВрдорд╛ рдпреЛрдЧрджрд╛рди рдЧрд░реНрди рдкреНрд░реЛрддреНрд╕рд╛рд╣рд┐рдд рдЧрд░реНрдиреЗрдЫ, рдЬрд╕рд▓реЗ рд╕рдореБрджрд╛рдпрдорд╛ рдХрд▓реНрдпрд╛рдгрдХрд╛рд░реА рдХрд╛рд░реНрдпрд╣рд░реВрд▓рд╛рдИ рдмрд▓рд┐рдпреЛ рдмрдирд╛рдЙрдиреЗрдЫред</li>
                </ul>

                <h4 class="text-xl font-bold text-gray-900 pt-2 border-t border-gray-200">рдирд┐рд╖реНрдХрд░реНрд╖ рд░ рдЖрдЧрд╛рдореА рдЪреБрдиреМрддреАрд╣рд░реВ</h4>
                <p class="text-sm">рдиреЗрдкреЛ рд╕реБрдкрд░ рдПрдкрдХреЛ рдкрд░рд┐рдХрд▓реНрдкрдирд╛ рдирд┐рдХреИ рдорд╣рддреНрд╡рд╛рдХрд╛рдВрдХреНрд╖реА рдЫ, рддрд░ рдпрд╕рд▓рд╛рдИ рд╕рдлрд▓ рдмрдирд╛рдЙрди рдХреЗрд╣реА рдЬрдЯрд┐рд▓рддрд╛рд╣рд░реВ рдкрд╛рд░ рдЧрд░реНрдиреБрдкрд░реНрдиреЗрдЫред рд░рд╛рдЗрдб-рд╣реЗрд▓рд┐рдЩ рд░ рд╡рд╛рд▓реЗрдЯ рдЬрд╕реНрддрд╛ рд╕реЗрд╡рд╛рд╣рд░реВрдХрд╛ рд▓рд╛рдЧрд┐ рдЖрд╡рд╢реНрдпрдХ рдирд┐рдпрдордирдХрд╛рд░реА рдорд╛рдкрджрдгреНрдбрд╣рд░реВ рд░ рдЙрдЪреНрдЪ-рд╕реБрд░рдХреНрд╖рд┐рдд рдкреВрд░реНрд╡рд╛рдзрд╛рд░рдХреЛ рдирд┐рд░реНрдорд╛рдг (рдЬрд╕рд▓рд╛рдИ рд╡рд┐рдХрд╛рд╕рдХрд░реНрддрд╛рд▓реЗ реирежреирео рдХреЛ рд▓рдХреНрд╖реНрдпрдорд╛ рд░рд╛рдЦреЗрдХрд╛ рдЫрдиреН) рдорд╛ рд╕рдлрд▓рддрд╛ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрдиреБрдкрд░реНрдиреЗрдЫред</p>
                <p class="text-sm font-bold mt-3 p-3 bg-red-50 border-l-4 border-red-400">рдпрджрд┐ рдпреЛ рдПрдк рдЖрдлреНрдирд╛ рд╕рдмреИ резрез рд╕реЗрд╡рд╛рд╣рд░реВрд▓рд╛рдИ рдПрдХреИ рдард╛рдЙрдБрдорд╛ рдПрдХреАрдХреГрдд рдЧрд░реНрди рд╕рдлрд▓ рднрдпреЛ рднрдиреЗ, рдиреЗрдкреЛ рд╕реБрдкрд░ рдПрдк рдиреЗрдкрд╛рд▓рдХреЛ рдбрд┐рдЬрд┐рдЯрд▓ рдХреНрд░рд╛рдиреНрддрд┐рдХреЛ рдПрдЙрдЯрд╛ рдорд╣рддреНрддреНрд╡рдкреВрд░реНрдг рдФрдЬрд╛рд░ рдмрдиреНрдиреЗ рдирд┐рд╢реНрдЪрд┐рдд рдЫред рдпрд╕рд▓реЗ рдиреЗрдкрд╛рд▓реА рдмрдЬрд╛рд░рдорд╛ рдПрдХрд╛рдзрд┐рдХрд╛рд░ рдХрд╛рдпрдо рдирдЧрд░реЗ рдкрдирд┐, рдЖрдо рдирд╛рдЧрд░рд┐рдХрдХреЛ рджреИрдирд┐рдХ рдЖрд╡рд╢реНрдпрдХрддрд╛рд╣рд░реВ рдкреВрд░рд╛ рдЧрд░реНрдиреЗ рдЕрдкрд░рд┐рд╣рд╛рд░реНрдп рдбрд┐рдЬрд┐рдЯрд▓ рдкреНрд▓реЗрдЯрдлрд░реНрдо рдХреЛ рд░реВрдкрдорд╛ рд╕реНрдерд╛рдкрд┐рдд рд╣реБрдиреЗ рдкреНрд░рдЪреБрд░ рд╕рдореНрднрд╛рд╡рдирд╛ рдмреЛрдХреЗрдХреЛ рдЫред</p>
            </div>
        `;
        
        // Define a map to hold full news content (only one article for now)
        const nepoNewsFullContent = {
            'nepo-super-app-future': nepoNewsFullArticle
        };


        const nepoNewsExamples_full = [
            // The new full article is the first example
            { title: "ЁЯУ░ 'рдиреЗрдкреЛ рд╕реБрдкрд░ рдПрдк' рдХреЛ рднрд╡рд┐рд╖реНрдпрдГ рдбрд┐рдЬрд┐рдЯрд▓ рдиреЗрдкрд╛рд▓рдХреЛ рдПрдХреАрдХрд░рдгрддрд░реНрдл рдПрдХ рдХреНрд░рд╛рдиреНрддрд┐рдХрд╛рд░реА рдлрдбреНрдХреЛ", source: "рдкреНрд░рд╡рд┐рдзрд┐ рд╡рд┐рд╢реНрд▓реЗрд╖рдХрд╣рд░реВ", time: "1 hr ago", category: "Technology", color: "bg-blue-500", url: 'nepo-super-app-future', isFullArticle: true },
            // Remaining original examples (excluding the original first one)
            { title: "Pakhribas Emerging as a Popular New Tourist Destination with View Tower", source: "The Rising Nepal", time: "3 hrs ago", category: "Tourism", color: "bg-green-500", url: getRandomSourceUrl() },
            { title: "International Arrivals Recover to 98% of Pre-Pandemic Levels in 2025", source: "Travel & Tour World", time: "5 hrs ago", category: "Tourism", color: "bg-orange-500", url: getRandomSourceUrl() },
            { title: "NEPSE Posts Double-Digit Gain; All Sectors Close in Green", source: "The Himalayan Times", time: "Yesterday", category: "Business", color: "bg-red-500", url: getRandomSourceUrl() },
            { title: "FDI Commitment Soars, Led by Information and Communication Technology", source: "Xinhua", time: "1 day ago", category: "Economy", color: "bg-purple-500", url: getRandomSourceUrl() },
            // Added 5 more original examples
            { title: "Kathmandu Valley Air Quality Improves Slightly After Monsoon Rainfall", source: "Online Khabar", time: "2 days ago", category: "Environment", color: "bg-blue-600", url: getRandomSourceUrl() },
            { title: "New Foreign Investment Policy Aims to Boost Technology Sector", source: "MyRepublica", time: "3 days ago", category: "Business", color: "bg-green-700", url: getRandomSourceUrl() },
            { title: "Historic Bhaktapur Durbar Square Restoration Enters Final Phase", source: "The Kathmandu Post", time: "4 days ago", category: "Culture", color: "bg-orange-700", url: getRandomSourceUrl() },
            { title: "Local Football Team Wins Regional Championship, Fans Celebrate", source: "Nepali Times", time: "5 days ago", category: "Sports", color: "bg-red-700", url: getRandomSourceUrl() },
            { title: "Government Launches Digital Literacy Campaign in Rural Provinces", source: "The Himalayan Times", time: "6 days ago", category: "Technology", color: "bg-purple-700", url: getRandomSourceUrl() }
        ];

        const nepoCalendarExamples_full = [
            { name: "Dashain (Mahanavami)", date: "Aswin 24, 2082 B.S.", type: "National Festival", color: "bg-red-600", icon: "fa-champagne-glasses" },
            { name: "Tihar (Laxmi Puja)", date: "Kartik 10, 2082 B.S.", type: "National Festival", color: "bg-orange-600", icon: "fa-lightbulb" },
            { name: "Lhosar", date: "Magh 25, 2082 B.S.", type: "Community Event", color: "bg-blue-600", icon: "fa-dragon" },
            { name: "My Friend's Birthday", date: "Bhadra 5, 2082 B.S.", type: "Personal Reminder", color: "bg-purple-600", icon: "fa-cake-candles" },
            { name: "Full Moon (Purnima)", date: "Upcoming: Jestha 1, 2083 B.S.", type: "Lunar Cycle", color: "bg-teal-600", icon: "fa-moon" },
            // Added 5 more
            { name: "Republic Day", date: "Jestha 15, 2083 B.S.", type: "National Holiday", color: "bg-green-600", icon: "fa-flag" },
            { name: "Teej Festival", date: "Bhadra 1, 2082 B.S.", type: "National Festival", color: "bg-pink-600", icon: "fa-person-dress" },
            { name: "Nepal Sambat New Year", date: "Kartik 11, 2082 B.S.", type: "Cultural Event", color: "bg-red-700", icon: "fa-gopuram" },
            { name: "New Year's Day (B.S.)", date: "Baisakh 1, 2083 B.S.", type: "National Holiday", color: "bg-orange-700", icon: "fa-globe-asia" },
            { name: "Scheduled Medical Checkup", date: "Poush 10, 2082 B.S.", type: "Personal Reminder", color: "bg-cyan-600", icon: "fa-user-nurse" }
        ];

        const nepoDiseaseData = {
            'cold': {
                icon: 'fa-head-side-cough', color: 'text-blue-500', name_en: 'Common Cold', name_ne: 'рд╕рд╛рдорд╛рдиреНрдп рд░реБрдШрд╛',
                en: {
                    intro: 'A viral infection of the nose and throat, characterized by sneezing, congestion, and sore throat.',
                    causes: 'Caused by hundreds of different viruses, primarily rhinoviruses, spread through air or direct contact.',
                    aware: 'Maintain good hygiene, wash hands frequently, and avoid close contact with infected individuals. Cover your mouth and nose when coughing or sneezing.'
                },
                ne: {
                    intro: 'рдирд╛рдХ рд░ рдШрд╛рдБрдЯреАрдХреЛ рднрд╛рдЗрд░рд▓ рд╕рдВрдХреНрд░рдордг рд╣реЛ, рдЬрд╕рдХреЛ рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣рд╛рдЪреНрдЫрд┐рдЙрдБ рдЖрдЙрдиреБ, рдирд╛рдХ рдмрдиреНрдж рд╣реБрдиреБ рд░ рдШрд╛рдБрдЯреА рджреБрдЦреНрдиреБ рд╣реЛред',
                    causes: 'рдореБрдЦреНрдпрддрдпрд╛ рд░рд╛рдЗрдиреЛрднрд╛рдЗрд░рд╕ рд▓рдЧрд╛рдпрдд рд╕рдпреМрдВ рд╡рд┐рднрд┐рдиреНрди рднрд╛рдЗрд░рд╕рдХрд╛ рдХрд╛рд░рдгрд▓реЗ рд╣реБрдиреНрдЫ, рдЬреБрди рд╣рд╛рд╡рд╛ рд╡рд╛ рдкреНрд░рддреНрдпрдХреНрд╖ рд╕рдореНрдкрд░реНрдХрдмрд╛рдЯ рдлреИрд▓рд┐рдиреНрдЫред',
                    aware: 'рд╕рдлрд╛ рд░рд╣рдиреБрд╣реЛрд╕реН, рдмрд╛рд░рдореНрдмрд╛рд░ рд╣рд╛рдд рдзреБрдиреБрд╣реЛрд╕реН, рд░ рд╕рдВрдХреНрд░рдорд┐рдд рд╡реНрдпрдХреНрддрд┐рд╣рд░реВрд╕рдБрдЧрдХреЛ рдирдЬрд┐рдХрдХреЛ рд╕рдореНрдкрд░реНрдХрдмрд╛рдЯ рдЬреЛрдЧрд┐рдиреБрд╣реЛрд╕реНред рдЦреЛрдХреНрджрд╛ рд╡рд╛ рд╣рд╛рдЪреНрдЫрд┐рдЙрдБ рдЧрд░реНрджрд╛ рдореБрдЦ рд░ рдирд╛рдХ рдЫреЛрдкреНрдиреБрд╣реЛрд╕реНред'
                }
            },
            'flu': {
                icon: 'fa-virus', color: 'text-red-500', name_en: 'Influenza (Flu)', name_ne: 'рдЗрдиреНрдлреНрд▓реБрдПрдиреНрдЬрд╛ (рдлреНрд▓реВ)',
                en: {
                    intro: 'A contagious respiratory illness, more severe than a cold, causing fever, body aches, and fatigue.',
                    causes: 'Caused by influenza viruses. It spreads mainly by droplets when infected people cough, sneeze or talk.',
                    aware: 'Get an annual flu shot. Avoid touching your eyes, nose, and mouth. Stay home when sick to prevent spreading the virus.'
                },
                ne: {
                    intro: 'рд░реВрдШрд╛ рднрдиреНрджрд╛ рдХрдбрд╛ рд╢реНрд╡рд╛рд╕рдкреНрд░рд╢реНрд╡рд╛рд╕рдХреЛ рд╕рдВрдХреНрд░рд╛рдордХ рд░реЛрдЧ рд╣реЛ, рдЬрд╕рд▓реЗ рдЬреНрд╡рд░реЛ, рд╢рд░реАрд░ рджреБрдЦреНрдиреЗ рд░ рдердХрд╛рди рдорд╣рд╕реБрд╕ рдЧрд░рд╛рдЙрдБрдЫред',
                    causes: 'рдЗрдиреНрдлреНрд▓реБрдПрдиреНрдЬрд╛ рднрд╛рдЗрд░рд╕рд▓реЗ рдЧрд░реНрджрд╛ рд╣реБрдиреНрдЫред рдпреЛ рдореБрдЦреНрдпрддрдпрд╛ рд╕рдВрдХреНрд░рдорд┐рдд рд╡реНрдпрдХреНрддрд┐рд▓реЗ рдЦреЛрдХреНрджрд╛, рд╣рд╛рдЪреНрдЫрд┐рдЙрдБ рдЧрд░реНрджрд╛ рд╡рд╛ рдХреБрд░рд╛ рдЧрд░реНрджрд╛ рдирд┐рд╕реНрдХрдиреЗ рдереЛрдкрд╛рд╣рд░реВрдмрд╛рдЯ рдлреИрд▓рд┐рдиреНрдЫред',
                    aware: 'рд╣рд░реЗрдХ рд╡рд░реНрд╖ рдлреНрд▓реВрдХреЛ рдЦреЛрдк рд▓рдЧрд╛рдЙрдиреБрд╣реЛрд╕реНред рдЖрдБрдЦрд╛, рдирд╛рдХ рд░ рдореБрдЦ рдЫреБрдирдмрд╛рдЯ рдЬреЛрдЧрд┐рдиреБрд╣реЛрд╕реНред рднрд╛рдЗрд░рд╕ рдлреИрд▓рд┐рдирдмрд╛рдЯ рд░реЛрдХреНрди рдмрд┐рд░рд╛рдореА рд╣реБрдБрджрд╛ рдШрд░рдореИ рдмрд╕реНрдиреБрд╣реЛрд╕реНред'
                }
            },
            'dengue': {
                icon: 'fa-mosquito', color: 'text-orange-500', name_en: 'Dengue Fever', name_ne: 'рдбреЗрдЩреНрдЧреБ рдЬреНрд╡рд░реЛ',
                en: {
                    intro: 'A painful, debilitating mosquito-borne disease common in tropical and subtropical regions.',
                    causes: 'Caused by the dengue virus, transmitted through the bite of Aedes mosquitoes, especially during monsoon.',
                    aware: 'Eliminate standing water sources around your home. Use mosquito nets and repellents. Wear long sleeves and pants during peak biting hours.'
                },
                ne: {
                    intro: 'рдЙрд╖реНрдгрдХрдЯрд┐рдмрдВрдзреАрдп рдХреНрд╖реЗрддреНрд░рд╣рд░реВрдорд╛ рд╕рд╛рдорд╛рдиреНрдп рд▓рд╛рдордЦреБрдЯреНрдЯреЗрдмрд╛рдЯ рд╕рд░реНрдиреЗ рдкреАрдбрд╛рджрд╛рдпрдХ рд░ рдХрдордЬреЛрд░ рдмрдирд╛рдЙрдиреЗ рд░реЛрдЧ рд╣реЛред',
                    causes: 'рдбреЗрдЩреНрдЧреБ рднрд╛рдЗрд░рд╕рдХрд╛ рдХрд╛рд░рдгрд▓реЗ рд╣реБрдиреНрдЫ, рдЬреБрди рдПрдбрд┐рд╕ рд▓рд╛рдордЦреБрдЯреНрдЯреЗрдХреЛ рдЯреЛрдХрд╛рдЗрдмрд╛рдЯ рд╕рд░реНрдЫ, рд╡рд┐рд╢реЗрд╖рдЧрд░реА рдордирд╕реБрдирдорд╛ред',
                    aware: 'рдЖрдлреНрдиреЛ рдШрд░ рд╡рд░рдкрд░ рдЬрдореЗрдХреЛ рдкрд╛рдиреА рд╣рдЯрд╛рдЙрдиреБрд╣реЛрд╕реНред рд▓рд╛рдордЦреБрдЯреНрдЯреЗрдХреЛ рдЬрд╛рд▓реА рд░ рднрдЧрд╛рдЙрдиреЗ рдФрд╖рдзрд┐ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реНред рд▓рд╛рдордЦреБрдЯреНрдЯреЗрд▓реЗ рдмрдвреА рдЯреЛрдХреНрдиреЗ рд╕рдордпрдорд╛ рд▓рд╛рдореЛ рдмрд╛рд╣реБрд▓рд╛ рд░ рдкрд╛рдЗрдиреНрдЯ рд▓рдЧрд╛рдЙрдиреБрд╣реЛрд╕реНред'
                }
            },
            'typhoid': {
                icon: 'fa-bowl-food', color: 'text-yellow-600', name_en: 'Typhoid Fever', name_ne: 'рдЯрд╛рдЗрдлрд╛рдЗрдб рдЬреНрд╡рд░реЛ',
                en: {
                    intro: 'A bacterial infection that can spread throughout the body, affecting many organs. High fever is a primary symptom.',
                    causes: 'Caused by Salmonella Typhi bacteria, spread through contaminated food or water.',
                    aware: 'Ensure food is thoroughly cooked and served hot. Drink only boiled, purified, or bottled water. Get vaccinated if traveling to endemic areas.'
                },
                ne: {
                    intro: 'рдпреЛ рдПрдХ рдмреНрдпрд╛рдХреНрдЯреЗрд░рд┐рдпрд▓ рд╕рдВрдХреНрд░рдордг рд╣реЛ рдЬреБрди рд╢рд░реАрд░рднрд░рд┐ рдлреИрд▓рд┐рдПрд░ рдзреЗрд░реИ рдЕрдВрдЧрд╣рд░реВрд▓рд╛рдИ рдЕрд╕рд░ рдЧрд░реНрди рд╕рдХреНрдЫред рдЙрдЪреНрдЪ рдЬреНрд╡рд░реЛ рдпрд╕рдХреЛ рдореБрдЦреНрдп рд▓рдХреНрд╖рдг рд╣реЛред',
                    causes: 'рд╕рд╛рд▓реНрдореЛрдиреЗрд▓рд╛ рдЯрд╛рдЗрдлреА рдмреНрдпрд╛рдХреНрдЯреЗрд░рд┐рдпрд╛рдХреЛ рдХрд╛рд░рдгрд▓реЗ рд╣реБрдиреНрдЫ, рдЬреБрди рджреВрд╖рд┐рдд рдЦрд╛рдирд╛ рд╡рд╛ рдкрд╛рдиреАрдмрд╛рдЯ рдлреИрд▓рд┐рдиреНрдЫред',
                    aware: 'рдЦрд╛рдирд╛ рд░рд╛рдореНрд░рд░реА рдкрдХрд╛рдПрдХреЛ рд░ рддрд╛рддреЛ рд╕реЗрд╡рд╛ рдЧрд░рд┐рдПрдХреЛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдЙрдорд╛рд▓реЗрдХреЛ, рд╢реБрджреНрдз рд╡рд╛ рдмреЛрддрд▓рдХреЛ рдорд╛рддреНрд░ рдкрд╛рдиреА рдкрд┐рдЙрдиреБрд╣реЛрд╕реНред рдорд╣рд╛рдорд╛рд░реА рднрдПрдХреЛ рдХреНрд╖реЗрддреНрд░рдорд╛ рдпрд╛рддреНрд░рд╛ рдЧрд░реНрджрд╛ рдЦреЛрдк рд▓рдЧрд╛рдЙрдиреБрд╣реЛрд╕реНред'
                }
            },
            'diabetes': {
                icon: 'fa-sugar-cube', color: 'text-pink-600', name_en: 'Diabetes (Type 2)', name_ne: 'рдордзреБрдореЗрд╣ (рдЯрд╛рдЗрдк реи)',
                en: {
                    intro: 'A chronic condition where the body does not effectively use insulin or cannot produce enough, leading to high blood sugar levels.',
                    causes: 'A combination of genetic factors, obesity, poor diet, and lack of physical activity.',
                    aware: 'Maintain a healthy body weight and consume a balanced diet low in processed sugars. Engage in regular physical activity (at least 30 minutes daily).'
                },
                ne: {
                    intro: 'рдПрдХ рджреАрд░реНрдШрдХрд╛рд▓реАрди рдЕрд╡рд╕реНрдерд╛ рд╣реЛ рдЬрд╣рд╛рдБ рд╢рд░реАрд░рд▓реЗ рдЗрдиреНрд╕реБрд▓рд┐рдирд▓рд╛рдИ рдкреНрд░рднрд╛рд╡рдХрд╛рд░реА рд░реВрдкрдорд╛ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрджреИрди рд╡рд╛ рдкрд░реНрдпрд╛рдкреНрдд рдЙрддреНрдкрд╛рджрди рдЧрд░реНрди рд╕рдХреНрджреИрди, рдЬрд╕рд▓реЗ рд░рдЧрддрдорд╛ рдЪрд┐рдиреАрдХреЛ рдорд╛рддреНрд░рд╛ рдмрдврд╛рдЙрдБрдЫред',
                    causes: 'рдЖрдиреБрд╡рдВрд╢рд┐рдХ рдХрд╛рд░рдХ, рдореЛрдЯреЛрдкрдирд╛, рдЦрд░рд╛рдм рдЖрд╣рд╛рд░ рд░ рд╢рд╛рд░реАрд░рд┐рдХ рдЧрддрд┐рд╡рд┐рдзрд┐рдХреЛ рдХрдореАрдХреЛ рд╕рдВрдпреЛрдЬрди рд╣реЛред',
                    aware: 'рд╕реНрд╡рд╕реНрде рд╢рд░реАрд░рдХреЛ рддреМрд▓ рдХрд╛рдпрдо рд░рд╛рдЦреНрдиреБрд╣реЛрд╕реН рд░ рдкреНрд░рд╢реЛрдзрд┐рдд рдЪрд┐рдиреА рдХрдо рднрдПрдХреЛ рд╕рдиреНрддреБрд▓рд┐рдд рдЖрд╣рд╛рд░ рд╕реЗрд╡рди рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдирд┐рдпрдорд┐рдд рд╢рд╛рд░реАрд░рд┐рдХ рдЧрддрд┐рд╡рд┐рдзрд┐рдорд╛ рд╕рдВрд▓рдЧреНрди рд╣реБрдиреБрд╣реЛрд╕реН (рджреИрдирд┐рдХ рдХрдореНрддрд┐рдорд╛ рейреж рдорд┐рдиреЗрдЯ)ред'
                }
            },
            'hyper': {
                icon: 'fa-heart-pulse', color: 'text-indigo-600', name_en: 'Hypertension (High BP)', name_ne: 'рдЙрдЪреНрдЪ рд░рдХреНрддрдЪрд╛рдк',
                en: {
                    intro: 'A condition in which the force of the blood against the artery walls is too high, leading to heart disease and stroke risks.',
                    causes: 'Often develops over time due to unhealthy lifestyle choices, such as high salt intake, lack of exercise, and smoking.',
                    aware: 'Reduce salt and caffeine intake. Limit alcohol consumption and quit smoking. Exercise regularly and manage stress through meditation or yoga.'
                },
                ne: {
                    intro: 'рдзрдордиреАрдХрд╛ рднрд┐рддреНрддрд╛рд╣рд░реВ рд╡рд┐рд░реБрджреНрдз рд░рдЧрддрдХреЛ рдмрд▓ рдзреЗрд░реИ рдЙрдЪреНрдЪ рд╣реБрдиреЗ рдЕрд╡рд╕реНрдерд╛ рд╣реЛ, рдЬрд╕рд▓реЗ рд╣реГрджрдп рд░реЛрдЧ рдФрд░ рд╕реНрдЯреНрд░реЛрдХрдХреЛ рдЬреЛрдЦрд┐рдо рдмрдврд╛рдЙрдБрдЫред',
                    causes: 'рдкреНрд░рд╛рдпрдГ рдЙрдЪреНрдЪ рдиреБрди рд╕реЗрд╡рди, рд╡реНрдпрд╛рдпрд╛рдордХреЛ рдХрдореА рд░ рдзреВрдореНрд░рдкрд╛рди рдЬрд╕реНрддрд╛ рдЕрд╕реНрд╡рд╕реНрде рдЬреАрд╡рдирд╢реИрд▓реАрдХрд╛ рдХрд╛рд░рдг рд╕рдордпрд╕рдБрдЧреИ рд╡рд┐рдХрд╕рд┐рдд рд╣реБрдиреНрдЫред',
                    aware: 'рдиреБрди рд░ рдХреНрдпрд╛рдлрд┐рди рд╕реЗрд╡рди рдХрдо рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдорджрд┐рд░рд╛ рд╕реЗрд╡рди рд╕реАрдорд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН рд░ рдзреВрдореНрд░рдкрд╛рди рдЫреЛрдбреНрдиреБрд╣реЛрд╕реНред рдирд┐рдпрдорд┐рдд рд╡реНрдпрд╛рдпрд╛рдо рдЧрд░реНрдиреБрд╣реЛрд╕реН рдФрд░ рдзреНрдпрд╛рди рд╡рд╛ рдпреЛрдЧ рдорд╛рд░реНрдлрдд рддрдирд╛рд╡ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред'
                }
            },
            'tb': {
                icon: 'fa-lungs', color: 'text-brown-500', name_en: 'Tuberculosis (TB)', name_ne: 'рдХреНрд╖рдпрд░реЛрдЧ (рдЯреАрдмреА)',
                en: {
                    intro: 'A potentially serious infectious disease that mainly affects the lungs. It is spread through the air when an infected person coughs or sneezes.',
                    causes: 'Caused by the bacterium Mycobacterium tuberculosis.',
                    aware: 'Ensure proper ventilation in living spaces. If diagnosed, complete the full course of medication without interruption. Get infants vaccinated with the BCG vaccine.'
                },
                ne: {
                    intro: 'рдпреЛ рдПрдХ рд╕рдореНрднрд╛рд╡рд┐рдд рдЧрдореНрднреАрд░ рд╕рдВрдХреНрд░рд╛рдордХ рд░реЛрдЧ рд╣реЛ рдЬрд╕рд▓реЗ рдореБрдЦреНрдпрддрдпрд╛ рдлреЛрдХреНрд╕реЛрд▓рд╛рдИ рдЕрд╕рд░ рдЧрд░реНрдЫред рдпреЛ рд╕рдВрдХреНрд░рдорд┐рдд рд╡реНрдпрдХреНрддрд┐рд▓реЗ рдЦреЛрдХреНрджрд╛ рд╡рд╛ рд╣рд╛рдЪреНрдЫрд┐рдЙрдБ рдЧрд░реНрджрд╛ рд╣рд╛рд╡рд╛ рдорд╛рд░реНрдлрдд рдлреИрд▓рд┐рдиреНрдЫред',
                    causes: 'рдорд╛рдЗрдХреЛрдмреНрдпрд╛рдХреНрдЯреЗрд░рд┐рдпрдо рдЯреНрдпреБрдмрд░рдХреБрд▓реЛрд╕рд┐рд╕ рдирд╛рдордХ рдмреНрдпрд╛рдХреНрдЯреЗрд░рд┐рдпрд╛рдмрд╛рдЯ рд╣реБрдиреНрдЫред',
                    aware: 'рдмрд╕реНрдиреЗ рдард╛рдЙрдБрд╣рд░реВрдорд╛ рдЙрдЪрд┐рдд рднреЗрдиреНрдЯрд┐рд▓реЗрд╕рди рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдпрджрд┐ рдирд┐рджрд╛рди рдЧрд░рд┐рдПрдорд╛, рдФрд╖рдзрд┐рдХреЛ рдкреВрд░реНрдг рдХреЛрд░реНрд╕ рдмрд┐рдирд╛ рдЕрд╡рд░реЛрдз рдкреВрд░рд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реНред рд╢рд┐рд╢реБрд╣рд░реВрд▓рд╛рдИ рдмреАрд╕реАрдЬреА рдЦреЛрдк рд▓рдЧрд╛рдЙрдиреБрд╣реЛрд╕реНред'
                }
            },
            'gastritis': {
                icon: 'fa-stomach', color: 'text-green-600', name_en: 'Gastritis/Indigestion', name_ne: 'рдЧреНрдпрд╛рд╕реНрдЯреНрд░рд╛рдЗрдЯрд┐рд╕/рдЕрдкрдЪ',
                en: {
                    intro: 'Inflammation of the stomach lining, often causing stomach pain, bloating, and nausea.',
                    causes: 'Caused by regular use of pain relievers, excessive alcohol, or Helicobacter pylori (H. pylori) infection.',
                    aware: 'Avoid spicy, oily, and highly acidic foods. Eat smaller, frequent meals. Manage stress and limit the use of non-steroidal anti-inflammatory drugs (NSAIDs).'
                },
                ne: {
                    intro: 'рдкреЗрдЯрдХреЛ рдЕрд╕реНрддрд░рдХреЛ рд╕реВрдЬрди рд╣реЛ, рдЬрд╕рд▓реЗ рдкреНрд░рд╛рдпрдГ рдкреЗрдЯ рджреБрдЦреНрдиреЗ, рдкреЗрдЯ рдлреБрд▓реНрдиреЗ рд░ рд╡рд╛рдХрд╡рд╛рдХреА рд▓рд╛рдЧреНрдиреЗ рдЧрд░реНрдЫред',
                    causes: 'рджреБрдЦрд╛рдЗ рдХрдо рдЧрд░реНрдиреЗ рдФрд╖рдзрд┐рд╣рд░реВрдХреЛ рдирд┐рдпрдорд┐рдд рдкреНрд░рдпреЛрдЧ, рдЕрддреНрдпрдзрд┐рдХ рдорджрд┐рд░рд╛ рд╡рд╛ рд╣реЗрд▓рд┐рдХреЛрдмреНрдпрд╛рдХреНрдЯрд░ рдкрд╛рдЗрд▓реЛрд░реА (H. pylori) рд╕рдВрдХреНрд░рдордгрдХрд╛ рдХрд╛рд░рдгрд▓реЗ рд╣реБрдиреНрдЫред',
                    aware: 'рдкрд┐рд░реЛ, рдЪрд┐рд▓реНрд▓реЛ рд░ рдзреЗрд░реИ рдЕрдорд┐рд▓реЛ рдЦрд╛рдиреЗрдХреБрд░рд╛рдмрд╛рдЯ рдЬреЛрдЧрд┐рдиреБрд╣реЛрд╕реНред рдереЛрд░реИ-рдереЛрд░реИ рд░ рдмрд╛рд░рдореНрдмрд╛рд░ рдЦрд╛рдиреБрд╣реЛрд╕реНред рддрдирд╛рд╡ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реН рд░ рдПрдирдПрд╕рдПрдЖрдИрдбреАрдПрд╕ (NSAIDs) рдХреЛ рдкреНрд░рдпреЛрдЧ рд╕реАрдорд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реНред'
                }
            },
            'copd': {
                icon: 'fa-smoking-ban', color: 'text-gray-800', name_en: 'COPD', name_ne: 'рдлреЛрдХреНрд╕реЛрдХреЛ рджреАрд░реНрдШрдХрд╛рд▓реАрди рд░реЛрдЧ',
                en: {
                    intro: 'A group of lung diseases that block airflow and make it difficult to breathe, including emphysema and chronic bronchitis.',
                    causes: 'Long-term exposure to irritating gases or particulate matter, most often from cigarette smoke or indoor pollution (e.g., biomass fuel smoke).',
                    aware: 'Crucially, quit smoking immediately. Minimize exposure to dust, fumes, and smoke, including indoor cooking smoke. Use prescribed inhalers correctly.'
                },
                ne: {
                    intro: 'рдлреЛрдХреНрд╕реЛрдХреЛ рд░реЛрдЧрд╣рд░реВрдХреЛ рд╕рдореВрд╣ рд╣реЛ рдЬрд╕рд▓реЗ рд╡рд╛рдпреБ рдкреНрд░рд╡рд╛рд╣рд▓рд╛рдИ рд░реЛрдХреНрдЫ рд░ рд╕рд╛рд╕ рдлреЗрд░реНрди рдЧрд╛рд╣реНрд░реЛ рдмрдирд╛рдЙрдБрдЫ, рдЬрд╕рдорд╛ рд╡рд╛рддрд╕реНрдлреАрддрд┐ рд░ рджреАрд░реНрдШрдХрд╛рд▓реАрди рдмреНрд░реЛрдВрдХрд╛рдЗрдЯрд┐рд╕ рд╕рдорд╛рд╡реЗрд╢ рдЫрдиреНред',
                    causes: 'рд▓рд╛рдореЛ рд╕рдордпрд╕рдореНрдо рдЪрд┐рдврд╛рдЙрдиреЗ рдЧреНрдпрд╛рд╕ рд╡рд╛ рдХрдг рдкрджрд╛рд░реНрдердХреЛ рд╕рдореНрдкрд░реНрдХрдорд╛ рд░рд╣рдиреБ, рдкреНрд░рд╛рдп: рдЪреБрд░реЛрдЯрдХреЛ рдзреБрд╡рд╛рдБ рд╡рд╛ рдШрд░рднрд┐рддреНрд░рдХреЛ рдкреНрд░рджреВрд╖рдг (рдЬрд╕реНрддреИ: рджрд╛рдЙрд░рд╛рдХреЛ рдзреБрд╡рд╛рдБ) рдмрд╛рдЯред',
                    aware: 'рддрддреНрдХрд╛рд▓ рдзреВрдореНрд░рдкрд╛рди рдЫреЛрдбреНрдиреБрд╣реЛрд╕реНред рдзреБрд▓реЛ, рдзреБрд╡рд╛рдБ, рд░ рднрд┐рддреНрд░реА рдЦрд╛рдирд╛ рдкрдХрд╛рдЙрдиреЗ рдзреБрд╡рд╛рдБ рд╕рд╣рд┐рддрдХреЛ рд╕рдореНрдкрд░реНрдХрд▓рд╛рдИ рдХрдо рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдЗрдиреНрд╣реЗрд▓рд░рд╣рд░реВ рд╕рд╣реА рддрд░рд┐рдХрд╛рд▓реЗ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реНред'
                }
            },
            'kidney': {
                icon: 'fa-urology', color: 'text-cyan-600', name_en: 'Kidney Stones', name_ne: 'рдорд┐рд░реНрдЧреМрд▓рд╛рдХреЛ рдкрддреНрдерд░реА',
                en: {
                    intro: 'Hard deposits of minerals and salts that form inside the kidneys, often causing severe pain when passing through the urinary tract.',
                    causes: 'Concentrated urine, often caused by dehydration, diet, and certain medical conditions.',
                    aware: 'Drink plenty of water throughout the day (2-3 liters). Reduce sodium, sugar, and animal protein intake. Consult a doctor for dietary recommendations.'
                },
                ne: {
                    intro: 'рдорд┐рд░реНрдЧреМрд▓рд╛ рднрд┐рддреНрд░ рдмрдиреНрдиреЗ рдЦрдирд┐рдЬ рд░ рдиреБрдирдХреЛ рдХрдбрд╛ рдирд┐рдХреНрд╖реЗрдк рд╣реЛ, рдЬреБрди рдкрд┐рд╕рд╛рдм рдирд▓реАрдмрд╛рдЯ рдЬрд╛рдБрджрд╛ рдкреНрд░рд╛рдпрдГ рддреАрд╡реНрд░ рдкреАрдбрд╛ рдирд┐рдореНрддреНрдпрд╛рдЙрдБрдЫред',
                    causes: 'рдкреНрд░рд╛рдпрдГ рдирд┐рд░реНрдЬрд▓реАрдХрд░рдг, рдЖрд╣рд╛рд░ рд░ рдХреЗрд╣реА рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЕрд╡рд╕реНрдерд╛рд╣рд░реВрдХрд╛ рдХрд╛рд░рдг рдкрд┐рд╕рд╛рдм рдЧрд╛рдврд╛ рд╣реБрдиреБред',
                    aware: 'рджрд┐рдирднрд░рд┐ рдкреНрд░рд╢рд╕реНрдд рдкрд╛рдиреА рдкрд┐рдЙрдиреБрд╣реЛрд╕реН (реи-рей рд▓рд┐рдЯрд░)ред рд╕реЛрдбрд┐рдпрдо, рдЪрд┐рдиреА рд░ рдЬрдирд╛рд╡рд░рдХреЛ рдкреНрд░реЛрдЯрд┐рди рд╕реЗрд╡рди рдХрдо рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдЖрд╣рд╛рд░рд╕рдореНрдмрдиреНрдзреА рд╕рд┐рдлрд╛рд░рд┐рд╕рд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рдбрд╛рдХреНрдЯрд░рд╕рдБрдЧ рд╕рд▓реНрд▓рд╛рд╣ рд▓рд┐рдиреБрд╣реЛрд╕реНред'
                }
            },
            'asthma': {
                icon: 'fa-person-running', color: 'text-purple-500', name_en: 'Asthma', name_ne: 'рджрдо рд░реЛрдЧ',
                en: {
                    intro: 'A chronic disease involving airway inflammation and narrowing, leading to difficulty breathing, wheezing, and coughing.',
                    causes: 'Triggers include air pollution, allergens (pollen, dust mites), respiratory infections, and exercise.',
                    aware: 'Identify and avoid personal triggers. Always carry and correctly use prescribed inhalers. Monitor peak flow regularly.'
                },
                ne: {
                    intro: 'рд╢реНрд╡рд╛рд╕рдорд╛рд░реНрдЧрдХреЛ рд╕реВрдЬрди рд░ рд╕рд╛рдБрдШреБрд░реЛрдкрдирд╛ рд╕рдорд╛рд╡реЗрд╢ рднрдПрдХреЛ рдПрдХ рджреАрд░реНрдШрдХрд╛рд▓реАрди рд░реЛрдЧ рд╣реЛ, рдЬрд╕рд▓реЗ рд╕рд╛рд╕ рдлреЗрд░реНрди рдХрдард┐рдирд╛рдИ, рд╕реБрд╕реНрдХреЗрд░рд╛ рд░ рдЦреЛрдХреА рдирд┐рдореНрддреНрдпрд╛рдЙрдБрдЫред',
                    causes: 'рдкреНрд░рджреВрд╖рдг, рдПрд▓рд░реНрдЬреА (рдкрд░рд╛рдЧрдХрдг, рдзреВрд▓реЛ), рд╢реНрд╡рд╛рд╕рдкреНрд░рд╢реНрд╡рд╛рд╕ рд╕рдВрдХреНрд░рдордг, рд░ рд╡реНрдпрд╛рдпрд╛рдорд▓реЗ рдпрд╕рд▓рд╛рдИ рдЙрддреНрдкреНрд░реЗрд░рд┐рдд рдЧрд░реНрджрдЫред',
                    aware: 'рд╡реНрдпрдХреНрддрд┐рдЧрдд рдЯреНрд░рд┐рдЧрд░рд╣рд░реВ рдкрд╣рд┐рдЪрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реН рд░ рддрд┐рдиреАрд╣рд░реВрдмрд╛рдЯ рдЬреЛрдЧрд┐рдиреБрд╣реЛрд╕реНред рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдЗрдиреНрд╣реЗрд▓рд░рд╣рд░реВ рд╕рдзреИрдВ рдмреЛрдХреНрдиреБрд╣реЛрд╕реН рд░ рд╕рд╣реА рд░реВрдкрдорд╛ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдирд┐рдпрдорд┐рдд рд░реВрдкрдорд╛ рдкреАрдХ рдлреНрд▓реЛ рдирд┐рдЧрд░рд╛рдиреА рдЧрд░реНрдиреБрд╣реЛрд╕реНред'
            }
            },
            'diarrhea': {
                icon: 'fa-toilet', color: 'text-brown-500', name_en: 'Diarrhea', name_ne: 'рдкрдЦрд╛рд▓рд╛',
                en: {
                    intro: 'Frequent passage of loose or watery stools, leading to dehydration if not managed quickly.',
                    causes: 'Bacterial or viral infections, parasites, or certain medications. Commonly due to consuming contaminated water/food.',
                    aware: 'Maintain strict hand hygiene, especially before eating and after using the toilet. Drink ORS (Oral Rehydration Solution) immediately. Ensure water is safe.'
                },
                ne: {
                    intro: 'рдкрд╛рддрд▓реЛ рд╡рд╛ рдкрд╛рдиреА рдЬрд╕реНрддреЛ рджрд┐рд╕рд╛ рдмрд╛рд░рдореНрдмрд╛рд░ рд╣реБрдиреБ, рдЬрд╕рд▓рд╛рдИ рддреБрд░реБрдиреНрддреИ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рдирдЧрд░реЗ рдирд┐рд░реНрдЬрд▓реАрдХрд░рдг рд╣реБрди рд╕рдХреНрдЫред',
                    causes: 'рдмреНрдпрд╛рдХреНрдЯреЗрд░рд┐рдпрд╛ рд╡рд╛ рднрд╛рдЗрд░рд▓ рд╕рдВрдХреНрд░рдордг, рдкрд░рдЬреАрд╡реА рд╡рд╛ рдХреЗрд╣реА рдФрд╖рдзрд┐рд╣рд░реВред рд╕рд╛рдорд╛рдиреНрдпрддрдпрд╛ рджреВрд╖рд┐рдд рдкрд╛рдиреА/рдЦрд╛рдирд╛ рдЙрдкрднреЛрдЧ рдЧрд░реНрджрд╛ред',
                    aware: 'рд╢реМрдЪрд╛рд▓рдп рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрдкрдЫрд┐ рд░ рдЦрд╛рдирд╛ рдЦрд╛рдиреБ рдЕрдШрд┐ рд╣рд╛рддрдХреЛ рд╕рд░рд╕рдлрд╛рдЗрдорд╛ рдХрдбрд╛рдЗ рдЧрд░реНрдиреБрд╣реЛрд╕реНред рддреБрд░реБрдиреНрддреИ рдУрдЖрд░рдПрд╕ (рдЬреАрд╡рдирдЬрд▓) рдкрд┐рдЙрдиреБрд╣реЛрд╕реНред рдкрд╛рдиреА рд╕реБрд░рдХреНрд╖рд┐рдд рднрдПрдХреЛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реНред'
                }
            },
            'jaundice': {
                icon: 'fa-tint', color: 'text-amber-500', name_en: 'Jaundice (Hepatitis)', name_ne: 'рдЬрдиреНрдбрд┐рд╕ (рдХрд▓реЗрдЬреЛрдХреЛ рд░реЛрдЧ)',
                en: {
                    intro: 'A yellow discoloration of the skin and eyes caused by excess bilirubin in the blood. It often indicates a liver problem.',
                    causes: 'Viral infections (Hepatitis A, B, C), gallstones, or excessive alcohol use.',
                    aware: 'Get vaccinated against Hepatitis A and B. Maintain clean sanitation and hygiene. Avoid uncooked or contaminated food and water.'
                },
                ne: {
                    intro: 'рд░рдЧрддрдорд╛ рдмрд┐рд▓рд┐рд░реБрдмрд┐рдирдХреЛ рдЕрдзрд┐рдХрддрд╛рдХрд╛ рдХрд╛рд░рдг рдЫрд╛рд▓рд╛ рд░ рдЖрдБрдЦрд╛ рдкрд╣реЗрдБрд▓реЛ рд╣реБрдиреЗ рдЕрд╡рд╕реНрдерд╛ред рдпрд╕рд▓реЗ рдкреНрд░рд╛рдпрдГ рдХрд▓реЗрдЬреЛрдХреЛ рд╕рдорд╕реНрдпрд╛рд▓рд╛рдИ рд╕рдВрдХреЗрдд рдЧрд░реНрджрдЫред',
                    causes: 'рднрд╛рдЗрд░рд▓ рд╕рдВрдХреНрд░рдордг (рд╣реЗрдкрд╛рдЯрд╛рдЗрдЯрд┐рд╕ рдП, рдмреА, рд╕реА), рдкрд┐рддреНрддрдереИрд▓реАрдХреЛ рдкрддреНрдерд░реА, рд╡рд╛ рдЕрддреНрдпрдзрд┐рдХ рдорджрд┐рд░рд╛ рд╕реЗрд╡рдиред',
                    aware: 'рд╣реЗрдкрд╛рдЯрд╛рдЗрдЯрд┐рд╕ рдП рд░ рдмреА рд╡рд┐рд░реБрджреНрдз рдЦреЛрдк рд▓рдЧрд╛рдЙрдиреБрд╣реЛрд╕реНред рд╕рдлрд╛ рд╕рд░рд╕рдлрд╛рдЗ рд░ рд╕реНрд╡рдЪреНрдЫрддрд╛ рдХрд╛рдпрдо рд░рд╛рдЦреНрдиреБрд╣реЛрд╕реНред рдирдкрд╛рдХреЗрдХреЛ рд╡рд╛ рджреВрд╖рд┐рдд рдЦрд╛рдирд╛ рд░ рдкрд╛рдиреАрдмрд╛рдЯ рдЬреЛрдЧрд┐рдиреБрд╣реЛрд╕реНред'
                }
            },
            'anemia': {
                icon: 'fa-droplet', color: 'text-red-700', name_en: 'Anemia', name_ne: 'рд░рдХреНрддрдЕрд▓реНрдкрддрд╛',
                en: {
                    intro: 'A condition where the body lacks enough healthy red blood cells to carry adequate oxygen to body tissues, causing fatigue and weakness.',
                    causes: 'Iron deficiency, Vitamin B12 deficiency, or chronic diseases.',
                    aware: 'Consume iron-rich foods (red meat, spinach, beans) and Vitamin C (citrus fruits) to aid iron absorption. Take prescribed iron supplements if necessary.'
                },
                ne: {
                    intro: 'рд╢рд░реАрд░рдорд╛ рдкрд░реНрдпрд╛рдкреНрдд рдЕрдХреНрд╕рд┐рдЬрди рдкреБрд░реНрдпрд╛рдЙрдирдХреЛ рд▓рд╛рдЧрд┐ рдкрд░реНрдпрд╛рдкреНрдд рд╕реНрд╡рд╕реНрде рд░рд╛рддреЛ рд░рдХреНрдд рдХреЛрд╢рд┐рдХрд╛рдХреЛ рдХрдореА рд╣реБрдиреЗ рдЕрд╡рд╕реНрдерд╛, рдЬрд╕рд▓реЗ рдердХрд╛рди рд░ рдХрдордЬреЛрд░реА рдирд┐рдореНрддреНрдпрд╛рдЙрдБрдЫред',
                    causes: 'рдЖрдЗрд░рдирдХреЛ рдХрдореА, рднрд┐рдЯрд╛рдорд┐рди рдмреАрезреи рдХреЛ рдХрдореА, рд╡рд╛ рджреАрд░реНрдШрдХрд╛рд▓реАрди рд░реЛрдЧрд╣рд░реВред',
                    aware: 'рдЖрдЗрд░рди рдпреБрдХреНрдд рдЦрд╛рдиреЗрдХреБрд░рд╛ (рд░рд╛рддреЛ рдорд╛рд╕реБ, рдкрд╛рд▓рдХ, рд╕рд┐рдореА) рд░ рдЖрдЗрд░рди рдЕрд╡рд╢реЛрд╖рдгрдорд╛ рд╕рд╣рдпреЛрдЧ рдЧрд░реНрди рднрд┐рдЯрд╛рдорд┐рди рд╕реА (рд╕рд┐рдЯреНрд░рд╕ рдлрд▓рдлреВрд▓) рд╕реЗрд╡рди рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдЖрд╡рд╢реНрдпрдХ рднрдПрдорд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдЖрдЗрд░рди рд╕рдкреНрд▓рд┐рдореЗрдиреНрдЯрд╣рд░реВ рд▓рд┐рдиреБрд╣реЛрд╕реНред'
            }
            },
            'arthritis': {
                icon: 'fa-joint', color: 'text-teal-700', name_en: 'Arthritis', name_ne: 'рдЬреЛрд░реНрдиреАрдХреЛ рджреБрдЦрд╛рдЗ',
                en: {
                    intro: 'Inflammation or degeneration of one or more joints, causing pain, stiffness, and reduced mobility.',
                    causes: 'Wear-and-tear (osteoarthritis), autoimmune disorders (rheumatoid arthritis), and infections.',
                    aware: 'Maintain a healthy weight to reduce joint stress. Engage in low-impact exercises (swimming, walking). Use heat or cold therapy for pain relief.'
                },
                ne: {
                    intro: 'рдПрдХ рд╡рд╛ рдмрдвреА рдЬреЛрд░реНрдиреАрд╣рд░реВрдХреЛ рд╕реВрдЬрди рд╡рд╛ рдХреНрд╖рдп, рдЬрд╕рд▓реЗ рджреБрдЦрд╛рдЗ, рдХрдбрд╛рдкрди, рд░ рдЧрддрд┐рд╢реАрд▓рддрд╛рдорд╛ рдХрдореА рд▓реНрдпрд╛рдЙрдБрдЫред',
                    causes: 'рдЬреЛрд░реНрдиреА рдЦрд┐рдЗрдиреБ (рдУрд╕реНрдЯрд┐рдпреЛрдЖрд░реНрдерд░рд╛рдЗрдЯрд┐рд╕), рдЕрдЯреЛрдЗрдореНрдпреВрди рд╡рд┐рдХрд╛рд░ (рд░реВрдореЗрдЯреЛрдЗрдб рдЖрд░реНрдерд░рд╛рдЗрдЯрд┐рд╕), рд░ рд╕рдВрдХреНрд░рдордгрд╣рд░реВред',
                    aware: 'рдЬреЛрд░реНрдиреАрдХреЛ рддрдирд╛рд╡ рдХрдо рдЧрд░реНрди рд╕реНрд╡рд╕реНрде рддреМрд▓ рдХрд╛рдпрдо рд░рд╛рдЦреНрдиреБрд╣реЛрд╕реНред рдХрдо рдкреНрд░рднрд╛рд╡ рдкрд╛рд░реНрдиреЗ рд╡реНрдпрд╛рдпрд╛рдорд╣рд░реВ (рдкреМрдбреА рдЦреЗрд▓реНрдиреЗ, рд╣рд┐рдбреНрдиреЗ) рдорд╛ рд╕рдВрд▓рдЧреНрди рд╣реБрдиреБрд╣реЛрд╕реНред рджреБрдЦрд╛рдЗ рдХрдо рдЧрд░реНрди рддрд╛рддреЛ рд╡рд╛ рдЪрд┐рд╕реЛ рдереЗрд░рд╛рдкреА рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реНред'
                }
            },
            'malaria': {
                icon: 'fa-bed-alt', color: 'text-lime-500', name_en: 'Malaria', name_ne: 'рдФрд▓реЛ',
                en: {
                    intro: 'A mosquito-borne infectious disease characterized by fever, chills, and flu-like illness.',
                    causes: 'Caused by Plasmodium parasites, transmitted through the bite of infected female Anopheles mosquitoes.',
                    aware: 'Use insecticide-treated bed nets. Take antimalarial prophylactic drugs if traveling to high-risk areas. Eliminate mosquito breeding sites.'
                },
                ne: {
                    intro: 'рдЬреНрд╡рд░реЛ, рдЪрд┐рд╕реЛ рд▓рд╛рдЧреНрдиреЗ рд░ рдлреНрд▓реВ рдЬрд╕реНрддреЛ рдмрд┐рдорд╛рд░реА рд╣реБрдиреЗ рд▓рд╛рдордЦреБрдЯреНрдЯреЗрдмрд╛рдЯ рд╕рд░реНрдиреЗ рд╕рдВрдХреНрд░рд╛рдордХ рд░реЛрдЧред',
                    causes: 'рд╕рдВрдХреНрд░рдорд┐рдд рдкреЛрдереА рдПрдиреЛрдлрд┐рд▓рд┐рд╕ рд▓рд╛рдордЦреБрдЯреНрдЯреЗрдХреЛ рдЯреЛрдХрд╛рдЗрдмрд╛рдЯ рд╕рд░реНрдиреЗ рдкреНрд▓рд╛рдЬреНрдореЛрдбрд┐рдпрдо рдкрд░рдЬреАрд╡реАрдХрд╛ рдХрд╛рд░рдгрд▓реЗ рд╣реБрдиреНрдЫред',
                    aware: 'рдХреАрдЯрдирд╛рд╢рдХрд▓реЗ рдЙрдкрдЪрд╛рд░ рдЧрд░рд┐рдПрдХреЛ рдУрдЫреНрдпрд╛рдирдХреЛ рдЬрд╛рд▓реА рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдЙрдЪреНрдЪ рдЬреЛрдЦрд┐рдо рдХреНрд╖реЗрддреНрд░рдорд╛ рдпрд╛рддреНрд░рд╛ рдЧрд░реНрджрд╛ рдФрд▓реЛ рд╡рд┐рд░реЛрдзреА рд░реЛрдХрдерд╛рдо рдФрд╖рдзрд┐ рд▓рд┐рдиреБрд╣реЛрд╕реНред рд▓рд╛рдордЦреБрдЯреНрдЯреЗрдХреЛ рдкреНрд░рдЬрдирди рд╕реНрдерд▓рд╣рд░реВ рд╣рдЯрд╛рдЙрдиреБрд╣реЛрд╕реНред'
                }
            },
            'uti': {
                icon: 'fa-urinal', color: 'text-purple-700', name_en: 'UTI', name_ne: 'рдореВрддреНрд░ рд╕рдВрдХреНрд░рдордг',
                en: {
                    intro: 'An infection in any part of the urinary system (kidneys, ureters, bladder, and urethra), often causing burning during urination.',
                    causes: 'Bacteria entering the urinary tract, commonly E. coli.',
                    aware: 'Drink plenty of water. Wipe from front to back after using the toilet. Urinate when you feel the need and after intercourse.'
                },
                ne: {
                    intro: 'рдореВрддреНрд░ рдкреНрд░рдгрд╛рд▓реА (рдорд┐рд░реНрдЧреМрд▓рд╛, рдореВрддреНрд░рд╡рд╛рд╣рд┐рдиреА, рдореВрддреНрд░рд╛рд╢рдп, рд░ рдореВрддреНрд░рдорд╛рд░реНрдЧ) рдХреЛ рдХреБрдиреИ рдкрдирд┐ рднрд╛рдЧрдорд╛ рд╣реБрдиреЗ рд╕рдВрдХреНрд░рдордг, рдЬрд╕рд▓реЗ рдкреНрд░рд╛рдпрдГ рдкрд┐рд╕рд╛рдм рдЧрд░реНрджрд╛ рдЬрд▓рди рдирд┐рдореНрддреНрдпрд╛рдЙрдБрдЫред',
                    causes: 'рдореВрддреНрд░ рдирд▓реАрдорд╛ рдкреНрд░рд╡реЗрд╢ рдЧрд░реНрдиреЗ рдмреНрдпрд╛рдХреНрдЯреЗрд░рд┐рдпрд╛, рд╕рд╛рдорд╛рдиреНрдпрддрдпрд╛ рдИ. рдХреЛрд▓рд╛рдИред',
                    aware: 'рдкреНрд░рд╢рд╕реНрдд рдкрд╛рдиреА рдкрд┐рдЙрдиреБрд╣реЛрд╕реНред рд╢реМрдЪрд╛рд▓рдп рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрдкрдЫрд┐ рдЕрдЧрд╛рдбрд┐рдмрд╛рдЯ рдкрдЫрд╛рдбрд┐ рдкреБрдЫреНрдиреБрд╣реЛрд╕реНред рдкрд┐рд╕рд╛рдм рд▓рд╛рдЧреНрджрд╛ рд░ рдпреМрди рд╕рдореНрдкрд░реНрдХрдкрдЫрд┐ рдкрд┐рд╕рд╛рдм рдЧрд░реНрдиреБрд╣реЛрд╕реНред'
                }
            },
            'backpain': {
                icon: 'fa-person-walking-with-cane', color: 'text-amber-700', name_en: 'Lower Back Pain', name_ne: 'рдХрдореНрдорд░ рджреБрдЦрд╛рдЗ',
                en: {
                    intro: 'A very common condition involving pain or discomfort in the lower back area, often acute or chronic.',
                    causes: 'Poor posture, heavy lifting, sedentary lifestyle, muscle strains, or disc problems.',
                    aware: 'Practice correct lifting techniques (lift with legs, not back). Maintain good posture while sitting and standing. Engage in core strengthening exercises.'
                },
                ne: {
                    intro: 'рдХрдореНрдорд░рдХреЛ рддрд▓реНрд▓реЛ рднрд╛рдЧрдорд╛ рд╣реБрдиреЗ рджреБрдЦрд╛рдЗ рд╡рд╛ рдЕрд╕реБрд╡рд┐рдзрд╛, рдЬреБрди рдкреНрд░рд╛рдпрдГ рддреАрд╡реНрд░ рд╡рд╛ рджреАрд░реНрдШрдХрд╛рд▓реАрди рд╣реБрдиреНрдЫред',
                    causes: 'рдЧрд▓рдд рдЖрд╕рди, рднрд╛рд░реА рд╕рд╛рдорд╛рди рдЙрдард╛рдЙрдиреБ, рдирд┐рд╖реНрдХреНрд░рд┐рдп рдЬреАрд╡рдирд╢реИрд▓реА, рдорд╛рдВрд╕рдкреЗрд╢реА рддрд╛рдирд┐рдиреБ, рд╡рд╛ рдбрд┐рд╕реНрдХ рд╕рдорд╕реНрдпрд╛рд╣рд░реВред',
                    aware: 'рдЙрдЪрд┐рдд рддрд░рд┐рдХрд╛рд▓реЗ рдЙрдард╛рдЙрдиреЗ рдЕрднреНрдпрд╛рд╕ рдЧрд░реНрдиреБрд╣реЛрд╕реН (рдХрдореНрдорд░рд▓реЗ рд╣реЛрдЗрди, рдЦреБрдЯреНрдЯрд╛рд▓реЗ рдЙрдард╛рдЙрдиреБрд╣реЛрд╕реН)ред рдмрд╕реНрджрд╛ рд░ рдЙрднрд┐рдБрджрд╛ рд░рд╛рдореНрд░реЛ рдЖрд╕рди рдХрд╛рдпрдо рд░рд╛рдЦреНрдиреБрд╣реЛрд╕реНред рдХреЛрд░ рдмрд▓рд┐рдпреЛ рдмрдирд╛рдЙрдиреЗ рд╡реНрдпрд╛рдпрд╛рдорд╣рд░реВрдорд╛ рд╕рдВрд▓рдЧреНрди рд╣реБрдиреБрд╣реЛрд╕реНред'
                }
            },
            'mental': {
                icon: 'fa-brain', color: 'text-fuchsia-600', name_en: 'Depression/Anxiety', name_ne: 'рдбрд┐рдкреНрд░реЗрд╕рди/рдЪрд┐рдиреНрддрд╛',
                en: {
                    intro: 'Common mental health disorders causing persistent sadness, lack of interest, excessive worry, and physical symptoms.',
                    causes: 'A complex interplay of genetic, biological, environmental, and psychological factors, including chronic stress and trauma.',
                    aware: 'Prioritize sleep and nutrition. Practice mindfulness and relaxation techniques. Seek professional help (counseling/therapy) if symptoms persist. Do not ignore mental health.'
                },
                ne: {
                    intro: 'рд╕рд╛рдорд╛рдиреНрдп рдорд╛рдирд╕рд┐рдХ рд╕реНрд╡рд╛рд╕реНрдереНрдп рд╡рд┐рдХрд╛рд░рд╣рд░реВ рдЬрд╕рд▓реЗ рдирд┐рд░рдиреНрддрд░ рдЙрджрд╛рд╕реА, рд░реБрдЪрд┐ рдирд╣реБрдиреБ, рдЕрддреНрдпрдзрд┐рдХ рдЪрд┐рдиреНрддрд╛, рд░ рд╢рд╛рд░реАрд░рд┐рдХ рд▓рдХреНрд╖рдгрд╣рд░реВ рдирд┐рдореНрддреНрдпрд╛рдЙрдБрдЫред',
                    causes: 'рдЖрдиреБрд╡рдВрд╢рд┐рдХ, рдЬреИрд╡рд┐рдХ, рд╡рд╛рддрд╛рд╡рд░рдгреАрдп, рд░ рдордиреЛрд╡реИрдЬреНрдЮрд╛рдирд┐рдХ рдХрд╛рд░рдХрд╣рд░реВрдХреЛ рдЬрдЯрд┐рд▓ рдЕрдиреНрддрд░рдХреНрд░рд┐рдпрд╛, рдЬрд╕рдорд╛ рджреАрд░реНрдШрдХрд╛рд▓реАрди рддрдирд╛рд╡ рд░ рдЖрдШрд╛рдд рд╕рдорд╛рд╡реЗрд╢ рдЫрдиреНред',
                    aware: 'рд╕реБрддреНрдиреЗ рд░ рдкреЛрд╖рдгрдорд╛ рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рджрд┐рдиреБрд╣реЛрд╕реНред рдорд╛рдЗрдиреНрдбрдлреБрд▓рдиреЗрд╕ рд░ рд╡рд┐рд╢реНрд░рд╛рдо рдкреНрд░рд╡рд┐рдзрд┐рд╣рд░реВрдХреЛ рдЕрднреНрдпрд╛рд╕ рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдпрджрд┐ рд▓рдХреНрд╖рдгрд╣рд░реВ рдЬрд╛рд░реА рд░рд╣рдиреНрдЫрдиреН рднрдиреЗ рдкреЗрд╢реЗрд╡рд░ рдорджреНрджрдд (рдкрд░рд╛рдорд░реНрд╢/рдЪрд┐рдХрд┐рддреНрд╕рд╛) рдЦреЛрдЬреНрдиреБрд╣реЛрд╕реНред рдорд╛рдирд╕рд┐рдХ рд╕реНрд╡рд╛рд╕реНрдереНрдпрд▓рд╛рдИ рдмреЗрд╡рд╛рд╕реНрддрд╛ рдирдЧрд░реНрдиреБрд╣реЛрд╕реНред'
                }
            },
            'fungal': {
                icon: 'fa-spa', color: 'text-gray-500', name_en: 'Skin Fungal Infections', name_ne: 'рдЫрд╛рд▓рд╛рдХреЛ рдлрдВрдЧрд▓ рд╕рдВрдХреНрд░рдордг',
                en: {
                    intro: 'Common skin infections like ringworm and athlete\'s foot, typically causing red, itchy, and scaly patches.',
                    causes: 'Fungi thriving in warm, moist environments, spread through contact with infected individuals or contaminated surfaces.',
                    aware: 'Keep skin clean and dry, especially in folds (groin, armpits, toes). Wear clean, breathable clothing. Avoid sharing towels and personal items.'
                },
                ne: {
                    intro: 'рджрд╛рдж рд░ рдПрдерд▓реАрдЯрдХреЛ рдЦреБрдЯреНрдЯрд╛ рдЬрд╕реНрддрд╛ рд╕рд╛рдорд╛рдиреНрдп рдЫрд╛рд▓рд╛ рд╕рдВрдХреНрд░рдордгрд╣рд░реВ, рдЬрд╕рд▓реЗ рдкреНрд░рд╛рдпрдГ рд░рд╛рддреЛ, рдЪрд┐рд▓рд╛рдЙрдиреЗ рд░ рдкрд╛рдкреНрд░реЛ рдЖрдЙрдиреЗ рджрд╛рдЧрд╣рд░реВ рдирд┐рдореНрддреНрдпрд╛рдЙрдБрдЫред',
                    causes: 'рдиреНрдпрд╛рдиреЛ, рдУрд╕рд┐рд▓реЛ рд╡рд╛рддрд╛рд╡рд░рдгрдорд╛ рдлрдВрдЧрд╕рд╣рд░реВ рдлрд╕реНрдЯрд╛рдЙрдБрдЫрдиреН, рдЬреБрди рд╕рдВрдХреНрд░рдорд┐рдд рд╡реНрдпрдХреНрддрд┐рд╣рд░реВ рд╡рд╛ рджреВрд╖рд┐рдд рд╕рддрд╣рд╣рд░реВрд╕рдБрдЧрдХреЛ рд╕рдореНрдкрд░реНрдХрдмрд╛рдЯ рдлреИрд▓рд┐рдиреНрдЫред',
                    aware: 'рдЫрд╛рд▓рд╛рд▓рд╛рдИ рд╕рдлрд╛ рд░ рд╕реБрдЦреНрдЦрд╛ рд░рд╛рдЦреНрдиреБрд╣реЛрд╕реН, рд╡рд┐рд╢реЗрд╖ рдЧрд░реА рддрд╣рд╣рд░реВрдорд╛ (рдЧреНрд░реЛрдЗрди, рдХрд╛рдЦреА, рдФрдВрд▓рд╛рд╣рд░реВ)ред рд╕рдлрд╛, рд╕рд╛рд╕ рдлреЗрд░реНрдиреЗ рд▓реБрдЧрд╛ рд▓рдЧрд╛рдЙрдиреБрд╣реЛрд╕реНред рддреМрд▓рд┐рдпрд╛ рд░ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд╕рд╛рдорд╛рдирд╣рд░реВ рд╕рд╛рдЭрд╛ рдЧрд░реНрдирдмрд╛рдЯ рдЬреЛрдЧрд┐рдиреБрд╣реЛрд╕реНред'
                },
            },
        };
        const diseaseKeys = Object.keys(nepoDiseaseData).slice(0, 20); 


        const nepoCareExamples_full = [
            { service: "Home Nurse Visit (Post-Op Care)", provider: "Shanti Health Services", date: "Sept 15, 2025", cost: 3500, icon: "fa-user-nurse" },
            { service: "Pediatric Tele-Consultation", provider: "Dr. R. Sharma", date: "Tomorrow, 10:00 AM", cost: 1200, icon: "fa-user-md" },
            { service: "Physiotherapy Session", provider: "KTM Rehab Center", date: "Scheduled", cost: 1800, icon: "fa-stethoscope" },
            { service: "Eldercare Giver (4 hours)", provider: "Community Help Group", date: "Oct 1, 2025", cost: 2000, icon: "fa-hand-holding-heart" },
            { service: "Mental Health Session", provider: "Counselor S. Thapa", date: "Scheduled", cost: 2500, icon: "fa-brain" }
        ];
        
        const nepoSecondHandExamples_full = [
            { item: "iPhone 12 (128GB)", price: 45000, condition: "Excellent", location: "Pokhara", icon: "fa-mobile-screen-button" },
            { item: "Wooden Dining Table (6-seater)", price: 18000, condition: "Good", location: "Baneshwor", icon: "fa-couch" },
            { item: "Canon DSLR Camera (Used)", price: 32000, condition: "Fair", location: "Lalitpur", icon: "fa-camera" },
            { item: "Electric Scooter (2023 Model)", price: 75000, condition: "Like New", location: "Kathmandu", icon: "fa-motorcycle" },
            { item: "Old Nepali Coin Collection", price: 5000, condition: "Collectible", location: "Bhaktapur", icon: "fa-coins" },
            // Added 5 more
            { item: "Electric Guitar (Yamaha)", price: 12000, condition: "Good", location: "Thamel", icon: "fa-guitar" },
            { item: "Hiking Backpack (50L)", price: 3500, condition: "Excellent", location: "Godawari", icon: "fa-mountain" },
            { item: "Used Samsung Galaxy A50", price: 10000, condition: "Fair", location: "New Road", icon: "fa-mobile-alt" },
            { item: "Set of Clay Pots (Artisan)", price: 4000, condition: "New", location: "Patan", icon: "fa-bowl-food" },
            { item: "Office Desk and Chair Set", price: 9000, condition: "Good", location: "Kirtipur", icon: "fa-chair" }
        ];

        const nepoShoppingExamples_full = [
            { item: "Traditional Dhaka Topi", price: 850, vendor: "Himalaya Weavers", status: "Shipped", icon: "fa-hat-cowboy" },
            { item: "Basmati Rice (25kg)", price: 2800, vendor: "Local Grocer", status: "Delivered", icon: "fa-wheat-awn" },
            { item: "Men's Jacket (Winter)", price: 4500, vendor: "Kathmandu Fashion", status: "Processing", icon: "fa-shirt" },
            { item: "Nepali Coffee Beans (500g)", price: 1200, vendor: "Organic Farms", status: "Delivered", icon: "fa-mug-saucer" },
            { item: "Set of Clay Pots", price: 1500, vendor: "Artisan Crafts", status: "Pending", icon: "fa-bowl-food" },
            // Added 5 more
            { item: "Smartwatch (Generic)", price: 3500, vendor: "Tech Nepal", status: "Shipped", icon: "fa-clock" },
            { item: "Electric Kettle (1.5L)", price: 1800, vendor: "Home Appliances", status: "Delivered", icon: "fa-blender" },
            { item: "Baby Diapers (Bulk)", price: 3200, vendor: "Mama & Baby Store", status: "Processing", icon: "fa-baby" },
            { item: "Set of Cooking Spices", price: 750, vendor: "Spicy Route", status: "Delivered", icon: "fa-pepper-hot" },
            { item: "Portable Bluetooth Speaker", price: 2100, vendor: "Audio World", status: "Pending", icon: "fa-volume-up" }
        ];

        const nepoVisaExamples_full = [
            { country: "Australia (Student Visa)", applicant: "Ramesh P.", status: "Processing", date: "Applied Mar '25", icon: "fa-graduation-cap" },
            { country: "USA (H1B Renewal)", applicant: "Sita G.", status: "Approved", date: "Expires Dec '26", icon: "fa-briefcase" },
            { country: "Canada (Visitor Visa)", applicant: "Prakash T.", status: "Denied", date: "Updated Today", icon: "fa-plane-up" },
            { country: "UK (Skilled Worker)", applicant: "Asha M.", status: "Interview Scheduled", date: "Oct 20, 2025", icon: "fa-hospital" },
            { country: "Japan (Training Visa)", applicant: "Dev K.", status: "Documents Submitted", date: "Next Update: 7 days", icon: "fa-wrench" },
            // Added 5 more
            { country: "Germany (Family Reunion)", applicant: "Laxmi B.", status: "Approved", date: "Issued Jan '26", icon: "fa-house-user" },
            { country: "South Korea (E-9)", applicant: "Manoj R.", status: "Processing", date: "Applied Sept '25", icon: "fa-factory" },
            { country: "Portugal (Golden Visa)", applicant: "Hari N.", status: "Document Review", date: "Updated 3 days ago", icon: "fa-euro-sign" },
            { country: "UAE (Employment Visa)", applicant: "Kajal Y.", status: "Medical Clearance Pending", date: "Next Update: 14 days", icon: "fa-building-o" },
            { country: "India (Business Visa)", applicant: "Samir J.", status: "Approved", date: "Issued Dec '25", icon: "fa-business-time" }
        ];

        const nepoDonationExamples_full = [
            { cause: "Nepal Flood Relief Fund", amount: 5000, recipient: "National Disaster Authority", date: "Sept 1, 2025", type: "Disaster Relief", icon: "fa-house-tsunami" },
            { cause: "Community School Books Drive", amount: 1500, recipient: "Rural Education NGO", date: "Aug 20, 2025", type: "Education", icon: "fa-book" },
            { cause: "Animal Shelter Renovation", amount: 1000, recipient: "KTM Animal Welfare", date: "Pending", type: "Animal Care", icon: "fa-paw" },
            { cause: "Eldercare Food Program", amount: 2000, recipient: "Elderly Home Patan", date: "Monthly Recurring", type: "Social Welfare", icon: "fa-shield-heart" },
            { cause: "Local Temple Preservation", amount: 800, recipient: "Temple Committee", date: "Sept 5, 2025", type: "Culture", icon: "fa-gopuram" },
            // Added 5 more
            { cause: "COVID-19 Oxygen Supply", amount: 3000, recipient: "Private Hospital Fund", date: "April 10, 2024", type: "Health", icon: "fa-lungs-virus" },
            { cause: "Support Orphan Children", amount: 1200, recipient: "Nepal Children's Home", date: "July 7, 2025", type: "Social Welfare", icon: "fa-child" },
            { cause: "Digital Literacy Training", amount: 750, recipient: "Tech For All NGO", date: "Oct 15, 2025", type: "Education", icon: "fa-laptop" },
            { cause: "Environmental Cleanup Drive", amount: 500, recipient: "Eco-Friendly Nepal", date: "Nov 1, 2025", type: "Environment", icon: "fa-recycle" },
            { cause: "Blind School Braille Books", amount: 2500, recipient: "Blind Welfare Trust", date: "Dec 12, 2025", type: "Education", icon: "fa-braille" }
        ];

        const nepoRoomRentExamples_full = [
            { title: "Single Room near TU (Male/Student)", rent: 6000, deposit: 1, location: "Kirtipur", type: "Room", icon: "fa-door-open" },
            { title: "2BHK Apartment (Family Friendly)", rent: 25000, deposit: 2, location: "Boudha", type: "Apartment", icon: "fa-building" },
            { title: "Shared Flat for Females (Professional)", rent: 4500, deposit: 1, location: "New Baneshwor", type: "Shared", icon: "fa-users" },
            { title: "Ground Floor Shop/Studio Space", rent: 15000, deposit: 3, location: "Thamel", type: "Commercial", icon: "fa-shop" },
            { title: "Small House for Rent (Garden)", rent: 18000, deposit: 2, location: "Godawari", type: "House", icon: "fa-house" },
            // Added 5 more
            { title: "Hostel Bed (Clean & Safe)", rent: 3500, deposit: 1, location: "Lazimpat", type: "Shared", icon: "fa-bed" },
            { title: "1BHK Flat (Couple/Working Pro)", rent: 12000, deposit: 2, location: "Patan Dhoka", type: "Apartment", icon: "fa-building" },
            { title: "Large Godown for Storage/Light Industry", rent: 35000, deposit: 4, location: "Kalanki", type: "Commercial", icon: "fa-warehouse" },
            { title: "Room with Balcony (Female Pro)", rent: 7500, deposit: 1, location: "Chabahil", type: "Room", icon: "fa-door-open" },
            { title: "Modern 3BHK Penthouse", rent: 60000, deposit: 3, location: "Baluwatar", type: "Apartment", icon: "fa-city" }
        ];

        const nepoJobsExamples_full = [
            { title: "Weekend Cafe Assistant", company: "Himalayan Brews", pay: "NPR 500/hr", location: "Thamel", type: "Hospitality", icon: "fa-mug-hot" },
            { title: "Freelance Graphic Designer", company: "Digital Solutions Co.", pay: "Project Based", location: "Remote", type: "Creative", icon: "fa-pen-nib" },
            { title: "After School Tutor (Maths/Science)", company: "Private Client", pay: "NPR 1000/session", location: "Lalitpur", type: "Education", icon: "fa-chalkboard-user" },
            { title: "Data Entry Specialist (Evening Shift)", company: "BPO Center", pay: "NPR 20k/month", location: "Baneshwor", type: "Admin", icon: "fa-keyboard" },
            { title: "Delivery Rider (Own Bike Required)", company: "Local Logistics", pay: "Per Delivery + Bonus", location: "KTM Area", type: "Logistics", icon: "fa-biking" },
            // Added 5 more
            { title: "Content Writer (Tech Niche)", company: "TechMedia Nepal", pay: "NPR 18k/month", location: "Remote", type: "Creative", icon: "fa-file-alt" },
            { title: "Housekeeping Staff (Part-Time)", company: "CleanPro Services", pay: "NPR 350/hr", location: "Lazimpat", type: "Service", icon: "fa-broom" },
            { title: "Customer Service Agent (Nepali/English)", company: "Telecom Support", pay: "NPR 25k/month", location: "Teku", type: "Call Center", icon: "fa-headset" },
            { title: "Social Media Intern", company: "Fashion Retailer", pay: "NPR 8k/month + Stipend", location: "New Road", type: "Marketing", icon: "fa-share-alt" },
            { title: "Waiter/Waitress (Hotel Experience)", company: "Luxury Hotel Patan", pay: "NPR 15k/month + Tips", location: "Patan", icon: "fa-bell-concierge" }
        ];

        const nepoWalletTransactions_full = [
            { type: "Payment Received", amount: 15000, source: "Freelance Client", date: "Oct 25, 2025", category: "Income", icon: "fa-arrow-down", color: "text-green-600" },
            { type: "Electricity Bill", amount: -2850, source: "Nepal Electricity", date: "Oct 24, 2025", category: "Utility", icon: "fa-plug", color: "text-red-600" },
            { type: "Mobile Top-up", amount: -500, source: "NTC", date: "Oct 24, 2025", category: "Communication", icon: "fa-mobile-alt", color: "text-red-600" },
            { type: "Mutual Fund Investment", amount: -10000, source: "Nepo Invest", date: "Oct 23, 2025", category: "Savings", icon: "fa-chart-line", color: "text-blue-600" },
            { type: "ATM Withdrawal", amount: -5000, source: "Bank Name", date: "Oct 22, 2025", category: "Cash", icon: "fa-money-bill-transfer", color: "text-gray-600" },
        ];

        const nepoExploreExamples_full = [
            { name: "Swayambhunath Stupa (Monkey Temple)", type: "Historic Site", distance: "4.5 km", rating: 4.8, icon: "fa-temple", color: 'text-amber-600' },
            { name: "Farmers Market at Patan", type: "Local Event", distance: "2.1 km", rating: 4.9, icon: "fa-seedling", color: 'text-green-600' },
            { name: "New Road Shopping Complex", type: "Shopping", distance: "7.0 km", rating: 4.3, icon: "fa-bag-shopping", color: 'text-purple-600' },
            { name: "Kathmandu Contemporary Art Center", type: "Culture & Arts", distance: "3.2 km", rating: 4.6, icon: "fa-palette", color: 'text-pink-600' },
            { name: "Sundarijal Waterfall Trek", type: "Nature & Outdoors", distance: "15 km", rating: 4.7, icon: "fa-mountain-sun", color: 'text-blue-600' },
        ];
        
        const nepoProfileData = {
            name: "Rajan Oli", 
            status: "Verified Platinum User",
            phone: "+977 98XXXXXXXX",
            email: "rajan.oli@example.com",
            address: "Boudha, Kathmandu",
            memberSince: "May 2023",
            nepoPoints: 1250, 
            securityStatus: "High (2FA Enabled)",
            recentActivity: [
                { type: "Ride", details: "Thamel to Airport (Completed)", date: "Oct 30", status: "Completed" },
                { type: "Shopping", details: "Dhaka Topi Purchase (Delivered)", date: "Oct 28", status: "Delivered" },
                { type: "SecondHand", details: "Bought iPhone 12 (45,000 NPR)", date: "Oct 26", status: "Completed" },
                { type: "Donation", details: "Flood Relief Fund (5,000 NPR)", date: "Oct 25", status: "Success" },
                { type: "Job", details: "Applied: Cafe Assistant", date: "Oct 24", status: "Pending" },
                { type: "Wallet", details: "Electricity Bill Payment (2,850 NPR)", date: "Oct 22", status: "Completed" },
                { type: "Care", details: "Booked Home Nurse Visit", date: "Oct 20", status: "Scheduled" },
                { type: "Ride", details: "Patan to Baneshwor (Completed)", date: "Oct 20", status: "Completed" },
                { type: "Visa", details: "AU Student Check (Processing)", date: "Oct 18", status: "Processing" },
                { type: "Wallet", details: "Received Freelance Pay (15,000 NPR)", date: "Oct 15", status: "Success" },
                { type: "RoomRent", details: "Viewed Kirtipur Listing", date: "Oct 10", status: "Viewed" },
                { type: "Shopping", details: "Nepali Coffee Beans (Delivered)", date: "Oct 08", status: "Delivered" },
                { type: "Explore", details: "Visited Swayambhunath Stupa", date: "Oct 01", status: "Completed" },
                { type: "Job", details: "Interviewed: Content Writer", date: "Sept 28", status: "Pending" },
                { type: "SecondHand", details: "Listed DSLR Camera", date: "Sept 25", status: "Active" },
                { type: "Wallet", details: "ATM Withdrawal (5,000 NPR)", date: "Sept 20", status: "Completed" },
                { type: "Ride", details: "Bhaktapur to Sanga Hill (Completed)", date: "Sept 18", status: "Completed" },
                { type: "Care", details: "Canceled: Physiotherapy", date: "Sept 15", status: "Cancelled" },
                { type: "Donation", details: "Animal Shelter (1,000 NPR)", date: "Sept 10", status: "Success" },
                { type: "Shopping", details: "Smartwatch Purchase (Shipped)", date: "Sept 5", status: "Shipped" },
                { type: "Explore", details: "Booked Hiking Trip", date: "Sept 1", status: "Scheduled" },
                { type: "Visa", details: "UK Skilled Worker Check", date: "Aug 28", status: "Approved" },
                { type: "Wallet", details: "Received E-Sewa Transfer", date: "Aug 25", status: "Success" },
                { type: "RoomRent", details: "Paid Advance for New Flat", date: "Aug 20", status: "Completed" },
                { type: "Job", details: "Accepted Job Offer: BPO", date: "Aug 15", status: "Hired" },
                { type: "Ride", details: "Gongabu to Baneshwor", date: "Aug 10", status: "Completed" },
                { type: "Shopping", details: "Purchased Winter Boots", date: "Aug 5", status: "Delivered" },
                { type: "Donation", details: "Disaster Relief Fund", date: "Aug 1", status: "Success" },
                { type: "SecondHand", details: "Sold Old Phone (7,000 NPR)", date: "July 28", status: "Completed" },
                { type: "Care", details: "Annual Health Checkup", date: "July 25", status: "Completed" },
            ],
            founder: {
                name: "Bipin Hamal",
                title: "Student, IoT at Baekseok University",
                contact: "01067083312",
                email: "bipinhamal2025@gmail.com"
            }
        };

        const nepoPharmacyData = [
            {
                name: "Janata Pharmacy, Thamel",
                medicines: [
                    { name: "Paracetamol (500mg)", price: 5, stock: 150, category: "Pain Relief" },
                    { name: "Amoxicillin (250mg)", price: 20, stock: 80, category: "Antibiotic" },
                    { name: "Jivan Jal (ORS)", price: 40, stock: 200, category: "Electrolyte" },
                    { name: "Cetirizine (10mg)", price: 8, stock: 120, category: "Allergy" },
                    { name: "Amlodipine (5mg)", price: 15, stock: 50, category: "Hypertension" },
                    { name: "Metformin (500mg)", price: 12, stock: 65, category: "Diabetes" },
                    { name: "Ibuprofen (400mg)", price: 7, stock: 90, category: "Pain Relief" },
                    { name: "Omeprazole (20mg)", price: 10, stock: 110, category: "Antacid" },
                    { name: "Vitamin C (Chewable)", price: 2, stock: 300, category: "Supplement" },
                    { name: "Bandage Roll (Medium)", price: 50, stock: 45, category: "First Aid" },
                ]
            },
            {
                name: "Patan Health Mart",
                medicines: [
                    { name: "Azithromycin (500mg)", price: 55, stock: 40, category: "Antibiotic" },
                    { name: "Loratadine (10mg)", price: 10, stock: 75, category: "Allergy" },
                    { name: "Furosemide (40mg)", price: 18, stock: 30, category: "Diuretic" },
                    { name: "Insulin Pen (Short-acting)", price: 1200, stock: 15, category: "Diabetes" },
                    { name: "Dolo-650", price: 6, stock: 180, category: "Pain Relief" },
                    { name: "Diclofenac Gel", price: 80, stock: 55, category: "Topical" },
                    { name: "Zincovit Syrup (100ml)", price: 150, stock: 60, category: "Supplement" },
                    { name: "Domperidone (10mg)", price: 9, stock: 95, category: "Antiemetic" },
                    { name: "Gauze Pads (Sterile)", price: 30, stock: 70, category: "First Aid" },
                    { name: "Simvastatin (20mg)", price: 25, stock: 25, category: "Cholesterol" },
                ]
            },
            {
                name: "Boudha Medical Center Dispensary",
                medicines: [
                    { name: "Cefixime (200mg)", price: 45, stock: 50, category: "Antibiotic" },
                    { name: "Ranitidine (150mg)", price: 7, stock: 100, category: "Antacid" },
                    { name: "Ondansetron (4mg)", price: 22, stock: 35, category: "Antiemetic" },
                    { name: "Clopidogrel (75mg)", price: 30, stock: 20, category: "Cardiology" },
                    { name: "Eye Drop (Ciprofloxacin)", price: 150, stock: 40, category: "Ophthalmic" },
                    { name: "Nebulizer Solution", price: 60, stock: 70, category: "Respiratory" },
                    { name: "Hydrocortisone Cream", price: 90, stock: 60, category: "Topical" },
                    { name: "Calcium & D3 Tabs", price: 4, stock: 250, category: "Supplement" },
                    { name: "Dextromethorphan Syrup", price: 120, stock: 45, category: "Cough" },
                    { name: "Surgical Mask (N95)", price: 70, stock: 100, category: "PPE" },
                ]
            },
            {
                name: "Kathmandu Pharmacy Central",
                medicines: [
                    { name: "Codeine Cough Syrup", price: 250, stock: 20, category: "Cough" },
                    { name: "Lisinopril (10mg)", price: 14, stock: 55, category: "Hypertension" },
                    { name: "Montelukast (10mg)", price: 35, stock: 40, category: "Asthma" },
                    { name: "Atorvastatin (10mg)", price: 28, stock: 30, category: "Cholesterol" },
                    { name: "Metronidazole (400mg)", price: 11, stock: 90, category: "Antiparasitic" },
                    { name: "Fungal Cream (Clotrimazole)", price: 75, stock: 65, category: "Topical" },
                    { name: "Gastro-B (Probiotic)", price: 18, stock: 120, category: "Digestive" },
                    { name: "Thermometer (Digital)", price: 350, stock: 25, category: "Medical Device" },
                    { name: "Electrolyte Powder Sachets", price: 35, stock: 150, category: "Electrolyte" },
                    { name: "Cold-EZ Tablets", price: 10, stock: 80, category: "Cold Relief" },
                ]
            },
            {
                name: "Lalitpur Pharma Store",
                medicines: [
                    { name: "Levofloxacin (500mg)", price: 60, stock: 35, category: "Antibiotic" },
                    { name: "Oxycodone (5mg)", price: 80, stock: 10, category: "Pain Relief" },
                    { name: "Albuterol Inhaler", price: 600, stock: 15, category: "Asthma" },
                    { name: "Thyroxine (50mcg)", price: 9, stock: 70, category: "Hormone" },
                    { name: "Iron & Folic Acid Tabs", price: 3, stock: 200, category: "Supplement" },
                    { name: "Kidney Support Herbal Tea", price: 180, stock: 50, category: "Herbal" },
                    { name: "Infrared Lamp", price: 1500, stock: 5, category: "Medical Device" },
                    { name: "Gliclazide (80mg)", price: 17, stock: 45, category: "Diabetes" },
                    { name: "Eardrops (Antiseptic)", price: 110, stock: 60, category: "Otic" },
                    { name: "Antiseptic Wipes (Box)", price: 130, stock: 85, category: "First Aid" },
                ]
            },
            {
                name: "Swoyambhu Pharmacy & Health",
                medicines: [
                    { name: "Cough Lozenges (Mint)", price: 1, stock: 500, category: "Cough" },
                    { name: "Hydrochlorothiazide (25mg)", price: 13, stock: 40, category: "Diuretic" },
                    { name: "Multivitamin (A-Z)", price: 5, stock: 180, category: "Supplement" },
                    { name: "Hand Sanitizer (500ml)", price: 250, stock: 100, category: "Hygiene" },
                    { name: "Povidone-iodine Solution", price: 85, stock: 75, category: "First Aid" },
                    { name: "Glucosamine Sulphate", price: 45, stock: 30, category: "Joint Health" },
                    { name: "Calamine Lotion", price: 100, stock: 60, category: "Topical" },
                    { name: "ORS Zink Combo", price: 70, stock: 90, category: "Electrolyte" },
                    { name: "Nimesulide (100mg)", price: 18, stock: 55, category: "Pain Relief" },
                    { name: "Paracetamol Syrup (Pedi)", price: 95, stock: 70, category: "Pain Relief" },
                ]
            },
            {
                name: "Balaju Pharma Supply",
                medicines: [
                    { name: "Warfarin (5mg)", price: 20, stock: 20, category: "Cardiology" },
                    { name: "Sertraline (50mg)", price: 40, stock: 15, category: "Mental Health" },
                    { name: "Potassium Chloride", price: 15, stock: 80, category: "Electrolyte" },
                    { name: "Infant Formula (Stage 1)", price: 2200, stock: 10, category: "Maternity" },
                    { name: "Tetanus Vaccine", price: 400, stock: 5, category: "Vaccine" },
                    { name: "Gynaecological Cream", price: 190, stock: 35, category: "Women's Health" },
                    { name: "Magnesium Tablets", price: 8, stock: 150, category: "Supplement" },
                    { name: "Anti-Diarrheal Caps", price: 12, stock: 90, category: "Digestive" },
                    { name: "Blood Pressure Monitor", price: 3500, stock: 8, category: "Medical Device" },
                    { name: "Gloves (Sterile Pair)", price: 15, stock: 120, category: "First Aid" },
                ]
            },
            {
                name: "New Road Chemist",
                medicines: [
                    { name: "Finasteride (1mg)", price: 55, stock: 25, category: "Hair/Skin" },
                    { name: "Viagra (Sildenafil)", price: 150, stock: 5, category: "Men's Health" },
                    { name: "Nicotine Gum", price: 40, stock: 30, category: "Smoking Cessation" },
                    { name: "Propranolol (40mg)", price: 16, stock: 60, category: "Cardiology" },
                    { name: "Sunscreen (SPF 50)", price: 450, stock: 50, category: "Skin Care" },
                    { name: "Painkiller Spray", price: 200, stock: 40, category: "Pain Relief" },
                    { name: "Throat Spray (Antiseptic)", price: 130, stock: 75, category: "Throat" },
                    { name: "Diaper Rash Cream", price: 110, stock: 65, category: "Maternity" },
                    { name: "Zinc Sulphate Tabs", price: 7, stock: 100, category: "Supplement" },
                    { name: "Cold Compress Gel Pack", price: 180, stock: 45, category: "First Aid" },
                ]
            },
            {
                name: "Airport Road Pharma",
                medicines: [
                    { name: "Travel Sickness Tabs", price: 15, stock: 70, category: "Travel" },
                    { name: "Ivermectin (12mg)", price: 90, stock: 25, category: "Antiparasitic" },
                    { name: "B Complex Forte", price: 10, stock: 150, category: "Supplement" },
                    { name: "Migraine Relief Tablets", price: 30, stock: 55, category: "Pain Relief" },
                    { name: "Pregnancy Test Kit", price: 100, stock: 40, category: "Maternity" },
                    { name: "Saline Nasal Spray", price: 120, stock: 60, category: "Respiratory" },
                    { name: "First Aid Kit (Complete)", price: 1500, stock: 10, category: "First Aid" },
                    { name: "Laxative Powder", price: 80, stock: 50, category: "Digestive" },
                    { name: "Diabetic Foot Cream", price: 280, stock: 35, category: "Diabetes" },
                    { name: "Disinfectant Liquid (1L)", price: 350, stock: 80, category: "Hygiene" },
                ]
            },
            {
                name: "Godavari Herbs & Pharma",
                medicines: [
                    { name: "Ashwagandha Powder", price: 300, stock: 60, category: "Herbal" },
                    { name: "Turmeric Capsules", price: 150, stock: 80, category: "Herbal" },
                    { name: "Ginseng Extract", price: 400, stock: 40, category: "Herbal" },
                    { name: "Ayurvedic Pain Balm", price: 90, stock: 120, category: "Topical" },
                    { name: "Blood Purifier Syrup", price: 180, stock: 55, category: "Herbal" },
                    { name: "Stress Relief Oil (Aromatherapy)", price: 250, stock: 70, category: "Mental Health" },
                    { name: "Chyawanprash (500g)", price: 650, stock: 30, category: "Supplement" },
                    { name: "Pillow for Back Pain", price: 900, stock: 15, category: "Medical Device" },
                    { name: "Tea Tree Oil (Antifungal)", price: 160, stock: 45, category: "Topical" },
                    { name: "Herbal Detox Tea", price: 120, stock: 100, category: "Herbal" },
                ]
            }
        ];
        
        // Global state for language
        let currentLang = 'en'; 
        // Global state for the active tab (either 'awareness' or 'pharmacy')
        let currentCareTab = 'awareness'; 

        // --- Core Functions ---

        function displayForecast() {
            const forecastEl = document.getElementById('weather-forecast');
            if (forecastEl) {
                const randomForecast = forecastMessages[Math.floor(Math.random() * forecastMessages.length)];
                
                // Use JSON.stringify and encodeURIComponent to safely pass the object in the onclick handler
                const forecastJson = encodeURIComponent(JSON.stringify(randomForecast));
                
                forecastEl.innerHTML = `
                    <div class="flex items-center w-full cursor-pointer" onclick="openForecastModal('${forecastJson}')">
                        <i class="fas ${randomForecast.icon} text-lg mr-2 ${randomForecast.color}"></i>
                        <span class="text-sm font-medium">${randomForecast.message}</span>
                        <i class="fas fa-chevron-right text-xs ml-auto opacity-70"></i>
                    </div>
                `;
            }
        }

        function openAppInfoModal() {
            const infoModal = document.getElementById('app-info-modal');
            if (infoModal) {
                infoModal.classList.remove('hidden');
            }
        }
        window.openAppInfoModal = openAppInfoModal;


        async function initializeFirebase() {
            // Check if API key is a placeholder
            if (firebaseConfig.apiKey === "YOUR_API_KEY_HERE" || !firebaseConfig.apiKey || !firebaseConfig.projectId) {
                console.warn("тЪая╕П Firestore is in DEMO MODE. Please replace placeholder config for database features (e.g., Nepo Driving) to work.");
                isAuthReady = true; 
                isFirebaseActive = false;
                window.dispatchEvent(new CustomEvent('authReady'));
                loadServiceData();
                return;
            }

            try {
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                isFirebaseActive = true;

                // Authentication listener
                onAuthStateChanged(auth, async (user) => {
                    if (user) {
                        userId = user.uid;
                        console.log("Authenticated User ID:", userId);
                    } else {
                        // Sign in anonymously if no user is authenticated
                        try {
                            await signInAnonymously(auth);
                            userId = auth.currentUser.uid;
                            console.log("Signed in anonymously. User ID:", userId);
                        } catch (error) {
                            console.error("Anonymous sign-in failed:", error);
                        }
                    }
                    isAuthReady = true;
                    window.dispatchEvent(new CustomEvent('authReady'));

                    loadServiceData();
                    setupRealtimeServices();
                });

                // Use custom token if provided
                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                    console.log("Signed in with custom token.");
                } else {
                    // Fallback to anonymous sign-in if no token is available (listener will handle it too)
                    await signInAnonymously(auth);
                }

            } catch (error) {
                console.error("Firebase initialization failed:", error);
                displayMessage(`Firebase error: ${error.code}. Running in demo mode.`, 'error');
                isAuthReady = true; 
                isFirebaseActive = false;
                window.dispatchEvent(new CustomEvent('authReady'));
                loadServiceData();
            }
        }

        // --- Firestore Utilities (Guarded for Demo Mode) ---

        function getServiceCollectionRef(serviceKey) {
            if (!isFirebaseActive || !db || !userId) throw new Error("Firestore is not active, initialized, or user is not ready.");
            // Using a Public path for multi-user collaboration visibility of active ride requests
            const path = `artifacts/${appId}/public/data/driving_requests`; 
            return collection(db, path);
        }

        async function addItem(serviceKey, itemData) {
            if (!isFirebaseActive) {
                return displayMessage("Cannot add item. App is in DEMO MODE (Missing Firebase Key).", 'warning');
            }
            if (!isAuthReady || !userId) return console.warn("Auth not ready. Cannot add item.");
            try {
                const docRef = await addDoc(getServiceCollectionRef(serviceKey), {
                    ...itemData,
                    createdBy: userId,
                    createdAt: serverTimestamp()
                });
                console.log("Document written with ID: ", docRef.id);
                return true;
            } catch (e) {
                console.error("Error adding document: ", e);
                displayMessage(`Error adding item: ${e.message}`, 'error');
                return false;
            }
        }

        // Realtime Listener for Services (Only for 'Nepo Driving' demo)
        function setupRealtimeServices() {
            if (!isFirebaseActive || !isAuthReady || !db || !userId) return;
            
            const serviceKey = 'driving';
            try {
                // Query for active (status 'requested') ride requests
                const q = query(
                    getServiceCollectionRef(serviceKey), 
                    where("status", "==", "requested")
                );

                onSnapshot(q, (snapshot) => {
                    const items = [];
                    snapshot.forEach((doc) => {
                        const data = doc.data();
                        items.push({ id: doc.id, ...data, 
                            // Convert Firestore Timestamp to Date object if needed
                            createdAt: data.createdAt ? (data.createdAt.toDate ? data.createdAt.toDate() : data.createdAt) : null
                        });
                    });
                    updateServiceView(serviceKey, items);
                }, (error) => {
                    console.error(`Error listening to ${serviceKey} collection: `, error);
                });
            } catch (e) {
                console.error("Failed to set up real-time listener:", e);
            }
        }

        // --- UI Logic and Data Handling (Including Nepo Care Language Toggle and Pharmacy Tabs) ---

        let currentService = null;
        const serviceModalEl = document.getElementById('service-modal');
        const modalTitleEl = document.getElementById('modal-title');
        const modalContentEl = document.getElementById('modal-content');

        // Initial mock data for the 'driving' list before any potential DB load
        let serviceData = {
            driving: [] 
        };
        

        // Functions for Nepo Care Language Toggle
        function switchLanguage(lang) {
            currentLang = lang;
            
            // 1. Update button styling
            const langEnBtn = document.getElementById('lang-en');
            const langNeBtn = document.getElementById('lang-ne');
            
            if (langEnBtn && langNeBtn) {
                langEnBtn.classList.remove('bg-indigo-600', 'text-white', 'bg-gray-200', 'text-gray-700');
                langNeBtn.classList.remove('bg-indigo-600', 'text-white', 'bg-gray-200', 'text-gray-700');
                
                if (lang === 'en') {
                    langEnBtn.classList.add('bg-indigo-600', 'text-white');
                    langNeBtn.classList.add('bg-gray-200', 'text-gray-700');
                } else {
                    langNeBtn.classList.add('bg-indigo-600', 'text-white');
                    langEnBtn.classList.add('bg-gray-200', 'text-gray-700');
                }
            }


            // 2. Toggle visibility of language-specific elements (list & footer)
            document.querySelectorAll('.disease-name-en').forEach(el => el.classList.toggle('hidden', lang !== 'en'));
            document.querySelectorAll('.disease-name-ne').forEach(el => el.classList.toggle('hidden', lang !== 'ne'));
            document.querySelectorAll('.footer-en').forEach(el => el.classList.toggle('hidden', lang !== 'en'));
            document.querySelectorAll('.footer-ne').forEach(el => el.classList.toggle('hidden', lang !== 'ne'));
            
            // 3. Re-render the details section with the new language
            // Find the currently selected disease button (highlighted with bg-indigo-200)
            const currentSelectedButton = document.querySelector('#disease-list-buttons button.bg-indigo-200');
            // Use the key from the selected button, or default to the first disease if none is selected
            const diseaseKey = currentSelectedButton ? currentSelectedButton.getAttribute('data-disease-key') : diseaseKeys[0]; 
            
            if (diseaseKey) {
                // IMPORTANT: Pass the new language here, which updates the view.
                showDiseaseDetails(diseaseKey, lang);
            } else if (document.getElementById('disease-details-display').innerHTML === '') {
                // If the modal is opened for the first time and language is switched before clicking a button,
                // load the default content in the new language.
                showDiseaseDetails(diseaseKeys[0], lang); 
            }
        }

        function showDiseaseDetails(diseaseKey, lang) {
            const data = nepoDiseaseData[diseaseKey];
            // Ensure the language passed is the active one, defaulting to the current global state if needed
            const actualLang = lang || currentLang;
            const content = data[actualLang];
            
            if (!data || !content) {
                console.error(`Error: Data not found for diseaseKey: ${diseaseKey} and language: ${actualLang}`);
                return;
            }

            // Update button active state
            document.querySelectorAll('#disease-list-buttons button').forEach(btn => {
                btn.classList.remove('bg-indigo-200', 'font-bold');
                btn.classList.add('bg-white', 'font-normal');
            });
            const activeBtn = document.querySelector(`button[data-disease-key="${diseaseKey}"]`);
            if(activeBtn) {
                 activeBtn.classList.remove('bg-white', 'font-normal');
                 activeBtn.classList.add('bg-indigo-200', 'font-bold');
            }
           
            
            const detailsHtml = `
                <h4 class="text-xl font-extrabold mb-3 text-gray-900">${actualLang === 'en' ? data.name_en : data.name_ne}</h4>
                
                <div class="mb-4 p-3 bg-gray-50 rounded-lg">
                    <p class="font-semibold text-indigo-700 text-sm mb-1">${actualLang === 'en' ? 'I. Introduction:' : 'рез. рдкрд░рд┐рдЪрдп:'}</p>
                    <p class="text-sm text-gray-700">${content.intro}</p>
                </div>
                
                <div class="mb-4 p-3 bg-gray-50 rounded-lg">
                    <p class="font-semibold text-indigo-700 text-sm mb-1">${actualLang === 'en' ? 'II. Causes:' : 'реи. рдХрд╛рд░рдгрд╣рд░реВ:'}</p>
                    <p class="text-sm text-gray-700">${content.causes}</p>
                </div>
                
                <div class="mb-4">
                    <p class="font-semibold text-indigo-700 text-sm mb-1">${actualLang === 'en' ? 'III. Prevention & Awareness (Formal Suggestion):' : 'рей. рд░реЛрдХрдерд╛рдо рд░ рд╕рдЪреЗрддрдирд╛ (рдФрдкрдЪрд╛рд░рд┐рдХ рд╕реБрдЭрд╛рд╡):'}</p>
                    <div class="p-3 bg-green-100 rounded-lg border border-green-300 shadow-sm">
                        <p class="text-sm text-green-800 font-medium">${content.aware}</p>
                    </div>
                </div>
            `;
            
            document.getElementById('disease-details-display').innerHTML = detailsHtml;
        }

        // Must attach these functions to the window object to be called from inline HTML
        window.switchLanguage = switchLanguage;
        window.showDiseaseDetails = showDiseaseDetails;
        
        // Function to switch between the care service tabs (awareness/pharmacy)
        function switchCareTab(tab) {
            currentCareTab = tab;
            
            // Update button styling
            document.getElementById('tab-awareness').classList.remove('bg-indigo-600', 'text-white', 'bg-gray-200', 'text-gray-700');
            document.getElementById('tab-pharmacy').classList.remove('bg-indigo-600', 'text-white', 'bg-gray-200', 'text-gray-700');
            
            if (tab === 'awareness') {
                document.getElementById('tab-awareness').classList.add('bg-indigo-600', 'text-white');
                document.getElementById('tab-pharmacy').classList.add('bg-gray-200', 'text-gray-700');
                
                // Set language buttons appropriately when returning to awareness
                switchLanguage(currentLang);
            } else {
                document.getElementById('tab-pharmacy').classList.add('bg-indigo-600', 'text-white');
                document.getElementById('tab-awareness').classList.add('bg-gray-200', 'text-gray-700');
            }
            
            // Toggle content visibility
            document.getElementById('care-content-awareness').classList.toggle('hidden', tab !== 'awareness');
            document.getElementById('care-content-pharmacy').classList.toggle('hidden', tab !== 'pharmacy');
            
            // If switching to pharmacy, re-run the filter to display initial list
            if (tab === 'pharmacy') {
                filterMedicines(); 
            }
        }
        window.switchCareTab = switchCareTab; // Expose to window

        // Function to search/filter the medicines (New)
        function filterMedicines() {
            const searchTerm = document.getElementById('medicine-search').value.toLowerCase();
            const storeListEl = document.getElementById('pharmacy-store-list');
            
            if (!storeListEl) return;

            let filteredHtml = '';
            let matchCount = 0;

            nepoPharmacyData.forEach(store => {
                const matchingMedicines = store.medicines.filter(med => 
                    med.name.toLowerCase().includes(searchTerm) || 
                    med.category.toLowerCase().includes(searchTerm)
                );

                if (matchingMedicines.length > 0) {
                    matchCount++;
                    filteredHtml += `
                        <div class="mb-4 p-3 bg-white border border-gray-200 rounded-xl shadow-sm">
                            <h4 class="font-bold text-base text-teal-700 border-b pb-1 mb-2">${store.name} <span class="text-xs font-normal text-gray-500 ml-2">(${matchingMedicines.length} match${matchingMedicines.length !== 1 ? 'es' : ''})</span></h4>
                            <div class="space-y-2 text-sm">
                                ${matchingMedicines.map(med => `
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-800">${med.name}</span>
                                        <div class="text-right">
                                            <span class="font-semibold text-gray-700">NPR ${med.price.toLocaleString()}</span>
                                            <p class="text-xs text-gray-500">${med.category} | <span class="${med.stock > 50 ? 'text-green-500' : med.stock > 15 ? 'text-orange-500' : 'text-red-500'}">${med.stock} in stock</span></p>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                }
            });

            if (matchCount === 0) {
                storeListEl.innerHTML = `
                    <div class="text-center p-8 text-gray-500">
                        <i class="fas fa-box-open text-4xl mb-3"></i>
                        <p>No medicines found matching your search term: **"${searchTerm}"**.</p>
                        <p class="text-xs mt-2">Try a different name or category (e.g., 'Pain Relief', 'Antibiotic').</p>
                    </div>
                `;
            } else {
                storeListEl.innerHTML = filteredHtml;
            }
        }
        window.filterMedicines = filterMedicines; // Expose to window


        function updateServiceView(serviceKey, items) {
            serviceData[serviceKey] = items;
            // Only re-render the modal if it's the currently open service
            if (currentService === serviceKey) {
                renderDrivingView('request'); // Re-render the driving view to update active requests
            }
        }

        function openModal(serviceKey) {
            currentService = serviceKey;
            const service = serviceMap[serviceKey];
            
            modalTitleEl.textContent = service ? service.name : (serviceKey === 'wallet' ? 'My Wallet' : serviceKey === 'explore' ? 'Explore Local' : serviceKey === 'profile' ? 'My Profile' : 'Service Details');
            
            serviceModalEl.classList.remove('hidden');

            renderModalContent(serviceKey);
        }

        function closeModal() {
            serviceModalEl.classList.add('hidden');
            modalContentEl.innerHTML = '';
            currentService = null;
        }
        
        function openGreeting() {
            const greetingModal = document.getElementById('greeting-modal');
            if (greetingModal) {
                setTimeout(() => {
                    greetingModal.classList.remove('hidden');
                }, 500); 
            }
        }
        window.openGreeting = openGreeting; 
        window.openForecastModal = openForecastModal;


        function openForecastModal(forecastJson) {
            const currentForecast = JSON.parse(decodeURIComponent(forecastJson));
            
            currentService = 'weather_forecast'; 
            
            modalTitleEl.textContent = "Today's Weather & Outlook";
            serviceModalEl.classList.remove('hidden');

            renderForecastModalContent(currentForecast);
        }

        function renderForecastModalContent(current) {
            const todayData = sevenDayForecast[0];

            let html = `<div class="p-4">
                <h3 class="text-xl font-semibold mb-4 text-gray-800">Current Conditions</h3>
                
                <div class="p-6 rounded-xl shadow-lg mb-6 bg-indigo-50 text-gray-800 border-l-4 border-indigo-500">
                    <div class="flex items-center justify-between mb-3">
                        <span class="text-4xl font-extrabold">${todayData.temp.split(' / ')[0]}</span>
                        <i class="fas ${todayData.icon} text-5xl text-indigo-500"></i>
                    </div>
                    <p class="text-lg font-semibold mb-1">${current.message.split(':')[0]}</p>
                    <p class="text-sm text-gray-600 font-medium">${current.message.split(': ')[1] || current.message}</p>
                    <hr class="my-3 border-gray-200">
                    <div class="flex justify-between text-xs text-gray-500 font-medium">
                        <span><i class="fas fa-wind mr-1"></i> Wind: ${todayData.wind}</span>
                        <span><i class="fas fa-temperature-three-quarters mr-1"></i> High/Low: ${todayData.temp}</span>
                    </div>
                </div>

                <h3 class="text-lg font-semibold mb-3 text-gray-800">7-Day Outlook</h3>
                <div class="space-y-2 max-h-[45vh] scrollable-content overflow-y-auto pb-4">
                    ${sevenDayForecast.map((day, index) => `
                        <div class="flex items-center justify-between p-3 bg-white border border-gray-200 rounded-xl ${index === 0 ? 'shadow-md border-indigo-200' : 'shadow-sm'}">
                            <span class="text-sm font-medium ${index === 0 ? 'text-indigo-600' : 'text-gray-700'}">${day.day}</span>
                            <div class="flex items-center text-xs text-gray-500 w-32 justify-end">
                                <i class="fas ${day.icon} mr-2 text-base w-4 text-center"></i>
                                <span>${day.condition}</span>
                            </div>
                            <div class="text-right">
                                <span class="text-sm font-semibold">${day.temp}</span>
                                <p class="text-xs text-gray-400">Wind: ${day.wind}</p>
                            </div>
                        </div>
                    `).join('')}
                    <div class="text-center p-4 text-gray-400 text-sm">-- Forecast provided by Nepo Weather --</div>
                </div>
            </div>`;
            modalContentEl.innerHTML = html;
        }

        // ----------------------------------------------
        // DRIVING VIEW TOGGLE FUNCTION (NEW/MODIFIED)
        // ----------------------------------------------
        
        // New Function to render the Driving sub-views (Request Form or History)
        function renderDrivingView(viewState) {
            const serviceKey = 'driving';
            const data = serviceData[serviceKey] || [];
            const service = serviceMap[serviceKey];
            const color = service ? service.color : 'bg-gray-600'; 
            let html = ``;

            // Add warning if Firebase is inactive
            const demoWarning = !isFirebaseActive ? `
                <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 p-3 mb-4 rounded-lg text-sm font-medium">
                    <i class="fas fa-exclamation-triangle mr-2"></i> Real-time features are disabled (DEMO MODE).
                </div>` : '';

            // Show the current user ID for multi-user collaboration visibility
            const userIdDisplay = isAuthReady ? `<p class="text-xs text-gray-500 mb-2">Your User ID: <span class="font-mono text-indigo-600">${userId}</span></p>` : '';
            
            // --- View Toggle Buttons (Sticky Header) ---
            const toggleButtons = `
                <div class="sticky top-0 bg-white pt-1 pb-4 z-20 border-b border-gray-200">
                    <div class="flex justify-around space-x-2">
                        <button onclick="renderDrivingView('request')" 
                            class="w-full px-4 py-2 text-sm font-semibold rounded-lg transition shadow-md ${viewState === 'request' ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-700'}">
                            <i class="fas fa-car-side mr-1"></i> Request Ride
                        </button>
                        <button onclick="renderDrivingView('history')" 
                            class="w-full px-4 py-2 text-sm font-semibold rounded-lg transition shadow-md ${viewState === 'history' ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-700'}">
                            <i class="fas fa-history mr-1"></i> Ride History
                        </button>
                    </div>
                </div>
            `;

            if (viewState === 'request') {
                html = `<div class="p-4">
                    ${demoWarning}
                    ${userIdDisplay}
                    ${toggleButtons}
                    <h3 class="text-xl font-semibold mb-4 text-gray-800 pt-4">Book Your Next Ride</h3>
                    <form id="driving-form" class="space-y-4 mb-8">
                        <input type="text" id="driving-pickup" placeholder="Pickup Location (GPS)" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                        <input type="text" id="driving-dropoff" placeholder="Destination" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                        <select id="driving-car-type" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="Standard">Standard Car</option>
                            <option value="Carpool">Carpool (Save money)</option>
                            <option value="Premium">Premium SUV</option>
                        </select>
                        <button type="submit" class="w-full py-3 ${color} text-white font-bold rounded-lg hover:opacity-90 transition duration-150">Find Driver</button>
                    </form>

                    <h3 class="text-xl font-semibold mb-3 text-gray-800">Active Ride Requests (${data.length})</h3>
                    <div class="space-y-3 mb-6 max-h-48 scrollable-content overflow-y-auto">
                        ${data.length === 0
                            ? '<p class="text-gray-500 text-sm p-3 bg-gray-50 rounded-lg text-center">No active ride requests found. Request one above!</p>'
                            : data.map(ride => {
                                const isMine = ride.createdBy === userId;
                                return `
                                <div class="p-3 bg-white border border-gray-200 rounded-lg shadow-sm flex justify-between items-center ${isMine ? 'border-indigo-500 bg-indigo-50' : ''}">
                                    <div>
                                        <p class="font-medium text-sm text-gray-800">${ride.pickupLocation} <i class="fas fa-arrow-right mx-1 text-xs"></i> ${ride.dropoffLocation}</p>
                                        <p class="text-xs text-gray-500">${ride.carType} - Requested by ${isMine ? 'You' : ride.createdBy.substring(0, 8) + '...'}</p>
                                    </div>
                                    <span class="text-sm font-bold text-indigo-600">Searching...</span>
                                </div>
                                `;
                            }).join('')
                        }
                    </div>
                </div>`;
            } else if (viewState === 'history') {
                // --- History View Content ---
                html = `<div class="p-4">
                    ${toggleButtons}
                    <h3 class="text-xl font-semibold mb-4 text-gray-800 pt-4">Your Completed Ride History (${nepoDrivingPastExamples.length})</h3>
                    <div class="space-y-3 max-h-[60vh] scrollable-content overflow-y-auto pb-4">
                        ${nepoDrivingPastExamples.map((ride, index) => `
                            <div class="p-3 bg-white border border-gray-200 rounded-xl shadow-sm flex justify-between items-center hover:bg-gray-50 transition">
                                <div>
                                    <p class="font-medium text-sm text-gray-800">${ride.pickup} <i class="fas fa-arrow-right mx-1 text-xs"></i> ${ride.dropoff}</p>
                                    <p class="text-xs text-gray-500">${ride.type}</p>
                                </div>
                                <div class="text-right">
                                    <span class="text-sm font-bold text-green-600">NPR ${ride.cost.toLocaleString()}</span>
                                    <p class="text-xs text-gray-400">${ride.status}</p>
                                </div>
                            </div>
                        `).join('')}
                        <div class="text-center p-4 text-gray-400 text-sm">-- End of history --</div>
                    </div>
                </div>`;
            }

            modalContentEl.innerHTML = html;
            // Re-attach form listener only if it's the request view
            if (viewState === 'request') {
                attachFormListeners(serviceKey);
            }
        }
        window.renderDrivingView = renderDrivingView; // Expose the new function

        // ----------------------------------------------
        // END DRIVING VIEW TOGGLE FUNCTION
        // ----------------------------------------------


        // Renders the combined Contact Details and Recent Activity view (expanded view)
        function showDetails() {
            const profile = nepoProfileData;
            
            // Set modal title to only display "Recent Nepo Activity"
            document.getElementById('modal-title').textContent = "Recent Nepo Activity";

            const contactActivityHtml = `<div class="p-4">
                <div class="text-center mb-4 sticky top-0 bg-white z-10 pt-2 pb-2 border-b border-gray-200">
                    <button onclick="renderProfileContent('full')" class="text-indigo-600 hover:text-indigo-800 font-semibold mb-2 flex items-center mx-auto">
                        <i class="fas fa-arrow-left mr-2"></i> Back to Profile Summary
                    </button>
                    <h3 class="text-xl font-bold text-gray-900">Activity Timeline</h3>
                </div>

                <div id="activity-list-container-anchor"></div> 
                
                <div class="mt-4">
                    <h4 class="text-lg font-bold text-gray-800 mb-3">All Recent Actions (${profile.recentActivity.length})</h4>
                    
                    <div class="space-y-4 pb-4 max-h-[70vh] scrollable-content overflow-y-auto">
                        ${profile.recentActivity.map(activity => `
                            <div class="flex items-center justify-between p-3 bg-white border border-gray-200 rounded-xl shadow-sm">
                                <div class="flex items-center">
                                    <div class="w-1 mr-3"></div> 
                                    <div>
                                        <p class="font-medium text-sm text-gray-800">${activity.type}: ${activity.details}</p>
                                        <p class="text-xs text-gray-400">${activity.date}</p>
                                    </div>
                                </div>
                                <span class="text-xs font-semibold flex-shrink-0 ml-1 ${activity.status === 'Completed' || activity.status === 'Delivered' || activity.status === 'Success' || activity.status === 'Active' || activity.status === 'Hired' ? 'text-green-600' : activity.status === 'Pending' || activity.status === 'Scheduled' || activity.status === 'Processing' ? 'text-orange-600' : 'text-gray-500'}">${activity.status}</span>
                            </div>
                        `).join('')}
                        <div class="text-center p-4 text-gray-400 text-sm">-- End of activity --</div>
                    </div>
                </div>
                
            </div>`;
            modalContentEl.innerHTML = contactActivityHtml;
            // Ensure the main scrollable container scrolls to top
            document.getElementById('modal-content').scrollTop = 0;
        }
        window.showDetails = showDetails; // Expose to window

        // Renders the main Profile view (initial state)
        function renderProfileContent(viewState) {
            const profile = nepoProfileData;

            // Reset title if coming back from detailed view
            if (viewState === 'full') {
                 document.getElementById('modal-title').textContent = "My Profile";
            }
            
            let html = `<div class="p-4">
                <div class="flex flex-col items-center p-4 bg-gray-50 rounded-xl shadow-inner mb-6">
                    <div class="w-16 h-16 rounded-full bg-indigo-500 text-white flex items-center justify-center text-2xl font-bold mb-2 border-4 border-white shadow-lg">
                        ${profile.name[0]}
                    </div>
                    <p class="text-xl font-bold text-gray-900">${profile.name}</p>
                    <p class="text-sm font-medium ${profile.status.includes('Platinum') ? 'text-amber-600' : 'text-green-600'}">${profile.status}</p>

                    <div class="mt-3 p-2 bg-amber-100 rounded-lg w-full text-center">
                        <p class="text-sm font-semibold text-amber-700">
                            <i class="fas fa-medal mr-1"></i> Nepo Points: ${profile.nepoPoints.toLocaleString()}
                        </p>
                    </div>
                </div>

                <div onclick="showDetails()" class="cursor-pointer mb-6 p-4 rounded-xl transition hover:bg-gray-100 border border-gray-200 shadow-md">
                    
                    <div class="flex justify-between items-center mb-3">
                        <h3 class="text-lg font-semibold text-gray-800">Contact & Membership</h3>
                        <i class="fas fa-chevron-right text-sm text-indigo-500"></i>
                    </div>

                    <div class="space-y-2">
                        <div class="flex items-center text-sm text-gray-700">
                            <i class="fas fa-phone-alt text-sm text-center text-indigo-500 mr-2 w-3"></i>
                            <span class="text-sm">${profile.phone}</span>
                        </div>
                        <div class="flex items-center text-sm text-gray-700">
                            <i class="fas fa-envelope text-sm text-center text-indigo-500 mr-2 w-3"></i>
                            <span class="text-sm">${profile.email}</span>
                        </div>
                        <div class="flex items-center text-sm text-gray-700">
                            <i class="fas fa-map-marker-alt text-sm text-center text-indigo-500 mr-2 w-3"></i>
                            <span class="text-sm">${profile.address}</span>
                        </div>
                    </div>
                </div>
                
                </div>`;
            modalContentEl.innerHTML = html;
        }
        window.renderProfileContent = renderProfileContent; // Expose to window
        
        // NEW FUNCTION: Renders the full news article in the modal
        function renderFullNewsArticle(articleId) {
            const htmlContent = nepoNewsFullContent[articleId];
            
            if (!htmlContent) {
                modalContentEl.innerHTML = '<div class="p-8 text-center text-red-500">Error: Full article content not found.</div>';
                return;
            }

            modalTitleEl.textContent = 'Full Article View';
            
            const fullNewsHtml = `
                <div class="p-4 max-h-[75vh] scrollable-content overflow-y-auto pb-4">
                    <button onclick="openModal('news')" class="text-sm text-indigo-600 hover:text-indigo-800 font-semibold mb-4 flex items-center">
                        <i class="fas fa-arrow-left mr-2"></i> Back to News Feed
                    </button>
                    ${htmlContent}
                </div>
            `;
            modalContentEl.innerHTML = fullNewsHtml;
        }
        window.renderFullNewsArticle = renderFullNewsArticle; // Expose to window


        function renderModalContent(serviceKey) {
            // Re-render the full modal content based on the selected service
            
            if (serviceKey === 'profile') {
                 // **FIX:** Directly call the initial full profile renderer
                 renderProfileContent('full'); 
                 return; 
            }
            
            const data = serviceData[serviceKey] || [];
            const service = serviceMap[serviceKey];
            let html = ``;
            const color = service ? service.color : 'bg-gray-600'; 


            if (serviceKey === 'driving') {
                // Functional service for demo: Nepo Driving
                renderDrivingView('request'); // Default to the 'request' view
                return; 
            } else if (serviceKey === 'care') {
                const defaultDiseaseKey = diseaseKeys[0]; 

                html = `
                    <div class="p-4 pt-2 sticky top-0 bg-white z-10 border-b border-gray-200">
                        <h3 class="text-xl font-semibold mb-3 text-gray-800">${service.name}</h3>
                        
                        <div class="flex justify-around space-x-2">
                            <button id="tab-awareness" onclick="switchCareTab('awareness')" 
                                class="w-full px-4 py-2 text-sm font-semibold rounded-lg transition shadow-md ${currentCareTab === 'awareness' ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-700'}">
                                <i class="fas fa-notes-medical mr-1"></i> Disease Awareness
                            </button>
                            <button id="tab-pharmacy" onclick="switchCareTab('pharmacy')" 
                                class="w-full px-4 py-2 text-sm font-semibold rounded-lg transition shadow-md ${currentCareTab === 'pharmacy' ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-700'}">
                                <i class="fas fa-pills mr-1"></i> Nepo Pharmacy
                            </button>
                        </div>
                    </div>

                    <div class="max-h-[70vh] pb-4">
                        <div id="care-content-awareness" class="flex h-[68vh] max-h-[68vh] ${currentCareTab !== 'awareness' ? 'hidden' : ''}">
                            <div class="w-2/5 border-r border-gray-200 overflow-y-auto scrollable-content p-2">
                                <p class="text-xs text-gray-500 font-medium p-2 sticky top-0 bg-white z-20 shadow-sm">
                                    <span>Select Disease (${diseaseKeys.length})</span>
                                    <div class="flex justify-between items-center mt-2">
                                        <button id="lang-en" onclick="switchLanguage('en')" 
                                            class="flex-1 py-1 text-xs font-semibold rounded-l-md transition ${currentLang === 'en' ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-700'}">ENG</button>
                                        <button id="lang-ne" onclick="switchLanguage('ne')" 
                                            class="flex-1 py-1 text-xs font-semibold rounded-r-md transition ${currentLang === 'ne' ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-700'}">рдиреЗрдк</button>
                                    </div>
                                </p>
                                <div id="disease-list-buttons" class="space-y-1 mt-2">
                                    ${diseaseKeys.map(key => {
                                        const d = nepoDiseaseData[key];
                                        // Default active state for the first button
                                        const isActive = key === defaultDiseaseKey ? 'bg-indigo-200 font-bold' : 'bg-white font-normal';
                                        return `
                                            <button onclick="showDiseaseDetails('${key}')" class="w-full text-left p-2 rounded-lg text-sm transition hover:bg-indigo-50 active:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 ${isActive}" data-disease-key="${key}">
                                                <i class="fas ${d.icon} w-4 mr-2 ${d.color}"></i>
                                                <span class="disease-name-en ${currentLang !== 'en' ? 'hidden' : ''}">${d.name_en}</span>
                                                <span class="disease-name-ne ${currentLang !== 'ne' ? 'hidden' : ''}">${d.name_ne}</span>
                                            </button>
                                        `;
                                    }).join('')}
                                </div>
                            </div>

                            <div class="w-3/5 overflow-y-auto scrollable-content p-4">
                                <div id="disease-details-display">
                                    </div>

                                <div class="mt-8 p-3 bg-red-100 border-l-4 border-red-500 text-red-800 rounded-lg text-sm font-medium">
                                    <i class="fas fa-hospital-user mr-2"></i>
                                    <span class="footer-en ${currentLang !== 'en' ? 'hidden' : ''}">If you experience symptoms, please visit your nearest health center immediately.</span>
                                    <span class="footer-ne ${currentLang !== 'ne' ? 'hidden' : ''}">рдпрджрд┐ рддрдкрд╛рдИрд▓рд╛рдИ рдХреБрдиреИ рд▓рдХреНрд╖рдг рджреЗрдЦрд┐рдПрдорд╛, рдХреГрдкрдпрд╛ рддреБрд░реБрдиреНрддреИ рдЖрдлреНрдиреЛ рдирдЬрд┐рдХрдХреЛ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдХреЗрдиреНрджреНрд░рдорд╛ рдЬрд╛рдиреБрд╣реЛрд╕реНред</span>
                                </div>
                                
                                <div class="mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200">
                                    <h4 class="text-md font-semibold text-gray-800 mb-2">Health & Home-Care Services (Examples)</h4>
                                    <div class="space-y-2">
                                        ${nepoCareExamples_full.map(item => `
                                            <div class="flex items-center justify-between text-xs text-gray-700">
                                                <div class="flex items-center">
                                                    <i class="fas ${item.icon} text-sm text-teal-600 mr-2"></i>
                                                    <span>${item.service.split(' (')[0]}</span>
                                                </div>
                                                <span class="font-medium">NPR ${item.cost.toLocaleString()}</span>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="care-content-pharmacy" class="p-4 ${currentCareTab !== 'pharmacy' ? 'hidden' : ''}">
                            <p class="text-sm text-gray-500 mb-3">Search real-time stock and prices across 10 partner pharmacies.</p>
                            
                            <div class="mb-4 sticky top-0 bg-white pt-1 pb-2 z-20 shadow-sm">
                                <div class="relative">
                                    <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                    <input type="text" id="medicine-search" onkeyup="filterMedicines()" placeholder="Search medicine name or category (e.g., Paracetamol, Antibiotic)" 
                                        class="w-full p-3 pl-10 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm">
                                </div>
                            </div>
                            
                            <div id="pharmacy-store-list" class="space-y-4 max-h-[50vh] scrollable-content overflow-y-auto">
                                </div>

                            <div class="text-center p-4 text-gray-400 text-sm mt-4">-- Prices are indicative, final cost may vary --</div>
                        </div>
                    </div>
                `;
                modalContentEl.innerHTML = html;
                
                // Initialize the display based on the current active tab
                setTimeout(() => {
                    // Initialize display language and show the default disease
                    if (currentCareTab === 'awareness') {
                        showDiseaseDetails(defaultDiseaseKey, currentLang); 
                        switchLanguage(currentLang); 
                    } else if (currentCareTab === 'pharmacy') {
                         filterMedicines(); // Populate the initial pharmacy list
                         switchCareTab('pharmacy'); 
                    }
                }, 50); 
            } else if (serviceKey === 'news') {
                 // Nepo News 
                html = `<div class="p-4">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Personalized News Feed (${nepoNewsExamples_full.length})</h3>
                    <p class="text-sm text-gray-500 mb-4">Click a headline to read the full article or visit the source portal.</p>
                    <div class="space-y-3 max-h-[70vh] scrollable-content overflow-y-auto pb-4">
                        ${nepoNewsExamples_full.map(news => {
                            // Determine the action based on whether it's a full article (isFullArticle: true) or a normal external link
                            const clickAction = news.isFullArticle 
                                ? `onclick="renderFullNewsArticle('${news.url}')"` // Use the new function for internal articles
                                : `onclick="window.open('${news.url}', '_blank')"`; // Standard action for external links
                            
                            // Determine the click cursor and visual hint
                            const cursorClass = news.isFullArticle ? 'cursor-pointer' : 'cursor-pointer'; 

                            return `
                            <div ${clickAction} class="block">
                                <div class="p-3 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition duration-150 ${cursorClass}">
                                    <div class="flex items-center mb-1">
                                        <span class="text-xs font-semibold px-2 py-0.5 rounded-full text-white ${news.color}">${news.category}</span>
                                    </div>
                                    <p class="font-medium text-base text-gray-800 leading-snug">${news.title}</p>
                                    <div class="flex justify-between items-center text-xs mt-1 text-gray-500">
                                        <span>${news.source}</span>
                                        <div class="flex items-center">
                                            ${news.isFullArticle ? '<i class="fas fa-file-alt mr-1"></i>' : '<i class="fas fa-external-link-alt mr-1"></i>'}
                                            <span>${news.time}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                        }).join('')}
                        <div class="text-center p-4 text-gray-400 text-sm">-- End of news feed examples --</div>
                    </div>
                </div>`;
            } else if (serviceKey === 'calendar') {
                // Nepo Calendar
                html = `<div class="p-4">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Upcoming Events (Bikram Sambat: ${nepoCalendarExamples_full.length})</h3>
                    <p class="text-sm text-gray-500 mb-4">Nepali dates, festivals, and personal reminders.</p>
                    <div class="space-y-3 max-h-[70vh] scrollable-content overflow-y-auto pb-4">
                        ${nepoCalendarExamples_full.map(item => `
                            <div class="flex items-start p-3 bg-white border border-gray-200 rounded-xl shadow-sm">
                                <div class="flex-shrink-0 w-10 h-10 ${item.color} rounded-full flex items-center justify-center text-white mr-3">
                                    <i class="fas ${item.icon} text-lg"></i>
                                </div>
                                <div class="flex-grow">
                                    <p class="font-semibold text-sm text-gray-800">${item.name}</p>
                                    <p class="text-xs text-gray-600">${item.date}</p>
                                    <span class="text-xs text-gray-400">${item.type}</span>
                                </div>
                            </div>
                        `).join('')}
                        <div class="text-center p-4 text-gray-400 text-sm">-- End of calendar examples --</div>
                    </div>
                </div>`;
            } else if (serviceKey === 'secondhand') {
                // Nepo Second-Hand Market
                html = `<div class="p-4">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Featured Second-Hand Listings (${nepoSecondHandExamples_full.length})</h3>
                    <p class="text-sm text-gray-500 mb-4">Buy and sell verified used goods locally.</p>
                    <div class="space-y-3 max-h-[70vh] scrollable-content overflow-y-auto pb-4">
                        ${nepoSecondHandExamples_full.map(item => `
                            <div class="p-3 bg-white border border-gray-200 rounded-xl shadow-sm flex justify-between items-center">
                                <div class="flex items-center">
                                    <i class="fas ${item.icon} text-xl text-green-600 mr-3"></i>
                                    <div>
                                        <p class="font-medium text-sm text-gray-800">${item.item}</p>
                                        <p class="text-xs text-gray-500">Condition: ${item.condition} | ${item.location}</p>
                                    </div>
                                </div>
                                <span class="text-base font-bold text-gray-700">NPR ${item.price.toLocaleString()}</span>
                            </div>
                        `).join('')}
                        <div class="text-center p-4 text-gray-400 text-sm">-- End of market examples --</div>
                    </div>
                </div>`;
            } else if (serviceKey === 'shopping') {
                // Nepo Online Shopping
                html = `<div class="p-4">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Your Recent Shopping Orders (${nepoShoppingExamples_full.length})</h3>
                    <p class="text-sm text-gray-500 mb-4">Tracking digital marketplace purchases.</p>
                    <div class="space-y-3 max-h-[70vh] scrollable-content overflow-y-auto pb-4">
                        ${nepoShoppingExamples_full.map(item => `
                            <div class="p-3 bg-white border border-gray-200 rounded-xl shadow-sm flex items-center justify-between">
                                <div class="flex items-center">
                                     <i class="fas ${item.icon} text-xl text-purple-600 mr-3"></i>
                                    <div>
                                        <p class="font-medium text-sm text-gray-800">${item.item}</p>
                                        <p class="text-xs text-gray-500">From: ${item.vendor}</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <span class="text-sm font-bold text-gray-700">NPR ${item.price.toLocaleString()}</span>
                                    <p class="text-xs font-semibold ${item.status === 'Delivered' ? 'text-green-500' : item.status === 'Shipped' ? 'text-blue-500' : 'text-orange-500'}">${item.status}</p>
                                </div>
                            </div>
                        `).join('')}
                        <div class="text-center p-4 text-gray-400 text-sm">-- End of shopping examples --</div>
                    </div>
                </div>`;
            } else if (serviceKey === 'visa') {
                // Nepo Visa Check
                html = `<div class="p-4">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Recent Visa/Immigration Status Checks (${nepoVisaExamples_full.length})</h3>
                    <p class="text-sm text-gray-500 mb-4">API-based status verification for citizens abroad.</p>
                    <div class="space-y-3 max-h-[70vh] scrollable-content overflow-y-auto pb-4">
                        ${nepoVisaExamples_full.map(item => {
                            const statusColor = item.status === 'Approved' ? 'text-green-600' : item.status === 'Denied' ? 'text-red-600' : 'text-orange-600';
                            return `
                                <div class="p-3 bg-white border border-gray-200 rounded-xl shadow-sm flex items-center justify-between">
                                    <div class="flex items-center">
                                        <i class="fas ${item.icon} text-xl text-blue-600 mr-3"></i>
                                        <div>
                                            <p class="font-medium text-sm text-gray-800">${item.country}</p>
                                            <p class="text-xs text-gray-500">Applicant: ${item.applicant} | ${item.date}</p>
                                        </div>
                                    </div>
                                    <span class="text-sm font-bold ${statusColor}">${item.status}</span>
                                </div>
                            `;
                        }).join('')}
                        <div class="text-center p-4 text-gray-400 text-sm">-- End of visa check examples --</div>
                    </div>
                </div>`;
            } else if (serviceKey === 'donation') {
                // Nepo Donation
                html = `<div class="p-4">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Your Donation History (${nepoDonationExamples_full.length})</h3>
                    <p class="text-sm text-gray-500 mb-4">Secure platform to donate and track organizations.</p>
                    <div class="space-y-3 max-h-[70vh] scrollable-content overflow-y-auto pb-4">
                        ${nepoDonationExamples_full.map(item => `
                            <div class="p-3 bg-white border border-gray-200 rounded-xl shadow-sm flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas ${item.icon} text-xl text-pink-600 mr-3"></i>
                                    <div>
                                        <p class="font-medium text-sm text-gray-800">${item.cause}</p>
                                        <p class="text-xs text-gray-500">${item.recipient} | ${item.date}</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <span class="text-sm font-bold text-gray-700">NPR ${item.amount.toLocaleString()}</span>
                                    <p class="text-xs text-gray-400">${item.type}</p>
                                </div>
                            </div>
                        `).join('')}
                        <div class="text-center p-4 text-gray-400 text-sm">-- End of donation examples --</div>
                    </div>
                </div>`;
            } else if (serviceKey === 'roomrent') {
                // Nepo Room Rent
                html = `<div class="p-4">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Featured Rental Listings (${nepoRoomRentExamples_full.length})</h3>
                    <p class="text-sm text-gray-500 mb-4">Search or list rooms, flats, and houses.</p>
                    <div class="space-y-3 max-h-[70vh] scrollable-content overflow-y-auto pb-4">
                        ${nepoRoomRentExamples_full.map(item => `
                            <div class="p-3 bg-white border border-gray-200 rounded-xl shadow-sm">
                                <div class="flex justify-between items-start mb-1">
                                    <p class="font-semibold text-sm text-gray-800">${item.title}</p>
                                    <span class="text-sm font-bold text-yellow-600">NPR ${item.rent.toLocaleString()}</span>
                                </div>
                                <div class="text-xs text-gray-500 flex justify-between">
                                    <span><i class="fas ${item.icon} mr-1"></i>${item.type} | ${item.location}</span>
                                    <span>Deposit: ${item.deposit} month${item.deposit > 1 ? 's' : ''}</span>
                                </div>
                            </div>
                        `).join('')}
                        <div class="text-center p-4 text-gray-400 text-sm">-- End of rental examples --</div>
                    </div>
                </div>`;
            } else if (serviceKey === 'jobs') {
                // Nepo Part-Time Job
                html = `<div class="p-4">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Local Part-Time Opportunities (${nepoJobsExamples_full.length})</h3>
                    <p class="text-sm text-gray-500 mb-4">Job board for students and freelance workers.</p>
                    <div class="space-y-3 max-h-[70vh] scrollable-content overflow-y-auto pb-4">
                        ${nepoJobsExamples_full.map(item => `
                            <div class="p-3 bg-white border border-gray-200 rounded-xl shadow-sm">
                                <div class="flex justify-between items-center mb-1">
                                    <p class="font-semibold text-sm text-gray-800">${item.title}</p>
                                    <span class="text-sm font-bold text-gray-700">${item.pay}</span>
                                </div>
                                <div class="text-xs text-gray-500 flex justify-between">
                                    <span><i class="fas fa-building mr-1"></i>${item.company} | ${item.location}</span>
                                    <span class="text-gray-400">${item.type}</span>
                                </div>
                            </div>
                        `).join('')}
                        <div class="text-center p-4 text-gray-400 text-sm">-- End of job examples --</div>
                    </div>
                </div>`;
            } else if (serviceKey === 'wallet') {
                // My Wallet
                html = `<div class="p-4">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">My Nepo Wallet</h3>
                    
                    <div class="header-gradient p-6 rounded-xl shadow-lg mb-6 text-white">
                        <p class="text-sm opacity-80">Wallet Balance</p>
                        <p class="text-4xl font-bold mb-1">NPR 45,678.00</p>
                    </div>

                    <div class="grid grid-cols-2 gap-4 mb-8">
                        <button class="flex flex-col items-center justify-center p-3 bg-indigo-100 text-indigo-700 rounded-xl shadow-md hover:bg-indigo-200 transition">
                            <i class="fas fa-money-bill-transfer text-2xl mb-1"></i>
                            <span class="text-sm font-semibold">Top Up</span>
                        </button>
                        <button class="flex flex-col items-center justify-center p-3 bg-green-100 text-green-700 rounded-xl shadow-md hover:bg-green-200 transition">
                            <i class="fas fa-paper-plane text-2xl mb-1"></i>
                            <span class="text-sm font-semibold">Send Money</span>
                        </button>
                    </div>

                    <h3 class="text-lg font-semibold mb-3 text-gray-800">Recent Wallet Activity</h3>
                    <div class="space-y-3 max-h-[40vh] scrollable-content overflow-y-auto pb-4">
                        ${nepoWalletTransactions_full.map(item => `
                            <div class="p-3 bg-white border border-gray-200 rounded-xl shadow-sm flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas ${item.icon} text-xl ${item.color} mr-3 w-5 text-center"></i>
                                    <div>
                                        <p class="font-medium text-sm text-gray-800">${item.type}</p>
                                        <p class="text-xs text-gray-500">${item.source} | ${item.date}</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <span class="text-sm font-bold ${item.amount > 0 ? 'text-green-600' : 'text-red-600'}">
                                        ${item.amount > 0 ? '+' : ''}NPR ${Math.abs(item.amount).toLocaleString()}
                                    </span>
                                    <p class="text-xs text-gray-400">${item.category}</p>
                                </div>
                            </div>
                        `).join('')}
                        <div class="text-center p-4 text-gray-400 text-sm">-- End of wallet examples --</div>
                    </div>
                </div>`;
            } else if (serviceKey === 'explore') {
                // Explore Destinations
                html = `<div class="p-4">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Explore: Local Destinations</h3>
                    <p class="text-sm text-gray-500 mb-4">Discover popular local events, sites, and activities near you.</p>

                    <h3 class="text-lg font-semibold mb-3 text-gray-800">Featured Spots (Examples)</h3>
                    <div class="space-y-3 max-h-[60vh] scrollable-content overflow-y-auto pb-4">
                        ${nepoExploreExamples_full.map(item => `
                            <div class="p-3 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition duration-150 cursor-pointer">
                                <div class="flex items-start justify-between">
                                    <div class="flex items-center">
                                        <i class="fas ${item.icon} text-xl ${item.color} mr-3 w-5 text-center"></i>
                                        <div>
                                            <p class="font-medium text-sm text-gray-800">${item.name}</p>
                                            <p class="text-xs text-gray-500">${item.type} | ${item.distance} away</p>
                                        </div>
                                    </div>
                                    <div class="text-right flex items-center">
                                        <span class="text-sm font-bold text-amber-500"><i class="fas fa-star mr-1 text-xs"></i>${item.rating}</span>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                        <div class="text-center p-4 text-gray-400 text-sm">-- End of explore examples --</div>
                    </div>
                </div>`;
            } else {
                // Generic content for the other services
                html = `<div class="p-4">
                    <p class="text-center text-gray-500 pt-8 text-lg font-medium">
                        Welcome to the <span class="text-gray-800 font-bold">${service.name}</span> service!
                    </p>
                    <div class="text-center p-8">
                        <i class="fas ${service.icon} text-6xl text-gray-300 mb-4"></i>
                        <p class="text-gray-400 mt-2">This feature is coming soon and will include its core functions: ${service.name} is about ${service.name === 'Nepo News' ? 'real-time local updates and personalized feeds.' : service.name === 'Nepo Calendar' ? 'Bikram Sambat dates, festivals, and event reminders.' : service.name === 'Nepo Care' ? 'online health bookings and remote consultations.' : service.name === 'Nepo Second-Hand Market' ? 'verified listings to buy and sell used goods safely.' : service.name === 'Nepo Online Shopping' ? 'a digital marketplace with fast local delivery.' : service.name === 'Nepo Visa Check' ? 'API-based visa and immigration status verification.' : service.name === 'Nepo Donation' ? 'a secure platform to donate to local charities and causes.' : service.name === 'Nepo Room Rent' ? 'an online service connecting landlords and tenants and housing.' : 'a local job board for part-time and freelance opportunities.'}</p>
                    </div>
                </div>`;
            }

            modalContentEl.innerHTML = html;
            attachFormListeners(serviceKey);
        }
        
        // --- End of renderModalContent ---

        // Attach listeners to newly rendered forms
        function attachFormListeners(serviceKey) {
            const form = document.getElementById(`${serviceKey}-form`);
            if (form) {
                form.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    if (!isAuthReady) return displayMessage("App is still initializing authentication. Please wait.", 'warning');

                    let itemData = {};

                    if (serviceKey === 'driving') {
                        itemData = {
                            pickupLocation: document.getElementById('driving-pickup').value,
                            dropoffLocation: document.getElementById('driving-dropoff').value,
                            carType: document.getElementById('driving-car-type').value,
                            status: 'requested'
                        };
                    } else {
                        // This block should theoretically not be hit since we only attach the listener for 'driving'
                        displayMessage(`The ${serviceMap[serviceKey].name} feature is still under development!`, 'info');
                        form.reset();
                        return;
                    }

                    const success = await addItem(serviceKey, itemData);
                    if (success) {
                        form.reset();
                        displayMessage(`${serviceMap[serviceKey].name} request successful! Looking for a match!`, 'success');
                        // No need to manually re-render; onSnapshot will trigger updateServiceView which calls renderDrivingView
                    }
                });
            }
        }


        function displayMessage(text, type = 'info') {
            const messageEl = document.getElementById('message-box');
            messageEl.textContent = text;
            messageEl.className = 'fixed top-4 right-4 p-3 rounded-xl shadow-xl z-50 transition duration-300';

            if (type === 'success') {
                messageEl.classList.add('bg-green-500', 'text-white');
            } else if (type === 'error') {
                messageEl.classList.add('bg-red-500', 'text-white');
            } else if (type === 'warning') {
                messageEl.classList.add('bg-yellow-500', 'text-gray-900');
            } else {
                messageEl.classList.add('bg-blue-500', 'text-white');
            }

            messageEl.classList.remove('opacity-0');

            // Hide the message after 3 seconds
            setTimeout(() => {
                messageEl.classList.add('opacity-0');
            }, 3000);
            
            // Re-enable pointer events after transition
            setTimeout(() => {
                messageEl.classList.remove('pointer-events-auto');
                messageEl.classList.add('pointer-events-none');
            }, 3300);
            messageEl.classList.remove('pointer-events-none');
            messageEl.classList.add('pointer-events-auto');
        }


        // Function to initialize the main service grid
        function loadServiceData() {
            const gridEl = document.getElementById('service-grid');
            if (!gridEl) return;

            const serviceKeys = Object.keys(serviceMap);
            gridEl.innerHTML = serviceKeys.map(key => {
                const service = serviceMap[key];
                return `
                    <div class="service-card ${service.color} p-6 rounded-xl shadow-lg flex flex-col items-center text-white text-center" data-service-key="${key}">
                        <i class="fas ${service.icon} text-4xl mb-3"></i>
                        <span class="font-semibold text-lg">${service.name.replace('Nepo ', '')}</span>
                        <span class="text-xs opacity-80 mt-1">${service.name}</span>
                    </div>
                `;
            }).join('');

            // Attach click listeners to the service cards
            gridEl.querySelectorAll('.service-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    const key = e.currentTarget.getAttribute('data-service-key');
                    if (key) {
                        openModal(key);
                    }
                });
            });
        }

        // Initialize on window load
        window.onload = () => {
            initializeFirebase();
            displayForecast();
            openGreeting();
        };
        window.openModal = openModal; 
        window.closeModal = closeModal;
    </script>

    <div class="max-w-md mx-auto h-screen flex flex-col bg-white shadow-xl">

        <header class="header-gradient p-6 rounded-b-3xl shadow-lg">
            <div class="flex justify-between items-center text-white mb-4">
                <h1 class="text-2xl font-extrabold tracking-tight">Nepo App</h1>
                <div class="flex space-x-3 items-center">
                    <button onclick="openAppInfoModal()" class="text-white text-2xl opacity-90 hover:opacity-100 transition">
                        <i class="fas fa-circle-info"></i>
                    </button>
                </div>
            </div>

            <div id="weather-forecast" class="flex items-center text-white p-2 bg-white bg-opacity-20 rounded-lg">
                <i class="fas fa-cloud text-lg mr-2 text-gray-200"></i>
                <span class="text-sm font-medium">Loading today's forecast...</span>
            </div>
        </header>

        <main id="main-content" class="flex-grow p-4 scrollable-content overflow-y-auto">

            <div class="construction-effect border-l-8 p-4 mb-6 rounded-xl shadow-md" role="alert">
                <div class="flex items-center">
                    <i class="fas fa-tools mr-3 text-lg"></i>
                    <p class="font-semibold text-sm">App is under construction.</p>
                </div>
            </div>

            <section class="mb-6">
                <h2 class="text-lg font-semibold text-gray-800 mb-3">Quick Access</h2>
                <div id="quick-access-grid" class="grid grid-cols-3 gap-3">
                    <div onclick="openModal('news')" class="bg-red-100 text-red-800 p-3 rounded-xl text-center transition hover:bg-red-200 cursor-pointer shadow-md">
                        <i class="fas fa-newspaper text-xl mb-1"></i>
                        <p class="text-xs font-medium">News</p>
                    </div>
                    <div onclick="openModal('calendar')" class="bg-orange-100 text-orange-800 p-3 rounded-xl text-center transition hover:bg-orange-200 cursor-pointer shadow-md">
                        <i class="fas fa-calendar-days text-xl mb-1"></i>
                        <p class="text-xs font-medium">Calendar</p>
                    </div>
                    <div onclick="openModal('driving')" class="bg-indigo-100 text-indigo-800 p-3 rounded-xl text-center transition hover:bg-indigo-200 cursor-pointer shadow-md">
                        <i class="fas fa-car-side text-xl mb-1"></i>
                        <p class="text-xs font-medium">Driving</p>
                    </div>
                </div>
            </section>

            <section class="mb-6">
                <h2 class="text-lg font-semibold text-gray-800 mb-3">All 10 Main Features</h2>
                <div id="service-grid" class="grid grid-cols-2 gap-4">
                    <div class="text-center p-8 text-gray-400">Loading features...</div>
                </div>
            </section>
        </main>

        <nav class="bg-white border-t border-gray-200 p-2 shadow-2xl">
            <div class="flex justify-around items-center">
                <a href="#" class="flex flex-col items-center text-indigo-600">
                    <i class="fas fa-home text-xl"></i>
                    <span class="text-xs mt-1">Home</span>
                </a>
                <a onclick="openModal('wallet')" class="flex flex-col items-center text-gray-400 hover:text-gray-600 cursor-pointer">
                    <i class="fas fa-wallet text-xl"></i>
                    <span class="text-xs mt-1">Wallet</span>
                </a>
                <a onclick="openModal('explore')" class="flex flex-col items-center text-gray-400 hover:text-gray-600 cursor-pointer">
                    <i class="fas fa-map-marked-alt text-xl"></i>
                    <span class="text-xs mt-1">Explore</span>
                </a>
                <a onclick="openModal('profile')" class="flex flex-col items-center text-gray-400 hover:text-gray-600 cursor-pointer">
                    <i class="fas fa-user-circle text-xl"></i>
                    <span class="text-xs mt-1">Profile</span>
                </a>
            </div>
        </nav>

    </div>

    <div id="service-modal" class="modal hidden fixed inset-0 z-40 bg-gray-900 bg-opacity-50 flex items-end justify-center">
        <div class="modal-content w-full max-w-md bg-white rounded-t-3xl shadow-2xl max-h-[85vh] flex flex-col transform translate-y-0" role="dialog" aria-modal="true">
            <div class="sticky top-0 bg-white p-4 border-b border-gray-200 rounded-t-3xl flex justify-between items-center z-20">
                <h2 id="modal-title" class="text-xl font-bold text-gray-900">Service Name</h2>
                <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700 p-1">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
            <div id="modal-content" class="flex-grow overflow-y-auto">
                <div class="p-8 text-center text-gray-400">Loading content...</div>
            </div>
        </div>
    </div>
    
    <div id="greeting-modal" class="hidden fixed inset-0 z-50 bg-gray-900 bg-opacity-70 flex items-center justify-center transition duration-300" role="dialog" aria-modal="true">
        <div class="bg-white p-8 rounded-xl shadow-2xl text-center transform scale-100 transition duration-300 max-w-xs mx-4">
            <p class="text-6xl mb-4">рдирдорд╕реНрддреЗЁЯЩП</p>
            <p class="text-lg font-semibold text-gray-800">Welcome to Nepo Super App!</p>
            <p class="text-sm text-gray-500 mt-1">Tap below to start exploring the digital world of NepalЁЯЗ│ЁЯЗ╡</p>
            <button onclick="document.getElementById('greeting-modal').classList.add('hidden')" class="mt-4 w-full py-3 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 transition duration-150 shadow-md">
                Enter App
            </button>
        </div>
    </div>

    <div id="app-info-modal" class="hidden fixed inset-0 z-50 bg-gray-900 bg-opacity-70 flex items-center justify-center transition duration-300" role="dialog" aria-modal="true">
        <div class="bg-white p-8 rounded-xl shadow-2xl text-center transform scale-100 transition duration-300 max-w-md mx-4 max-h-[90vh] overflow-y-auto">
            <p class="text-4xl mb-4 text-indigo-600"><i class="fas fa-satellite-dish"></i></p>
            <p class="text-xl font-extrabold text-gray-900">ЁЯЗ│ЁЯЗ╡ Nepo Super App</p>
            <p class="text-sm text-gray-500 mt-1 mb-4">Version 1.0.2 - Demo Prototype | <span class="font-semibold text-indigo-700">Goal: Full Release by Late 2028</span></p>

            <div class="text-left mb-6 p-4 bg-indigo-50 rounded-xl border border-indigo-200">
                <h3 class="font-bold text-base text-indigo-700 mb-2">Project Vision: Unified Digital Ecosystem</h3>
                <p class="text-sm text-gray-700">The Nepo Super App is envisioned as a unified, multi-service digital ecosystem aiming to streamline daily life for the Nepali public. By consolidating 11 essential servicesтАФfrom mobility and finance to health and community resourcesтАФinto a single interface, it maximizes convenience and efficiency.</p>
            </div>

            <h3 class="font-bold text-base text-gray-800 mb-2 text-left">11 Core Services & Pillars</h3>
            <div class="space-y-1.5 mb-6 text-sm text-left max-h-48 overflow-y-auto p-3 bg-gray-50 rounded-xl shadow-inner border border-gray-200">
                <p class="font-semibold text-indigo-600">I. Mobility & Logistics:</p>
                <p class="ml-3"><i class="fas fa-car-side mr-1"></i> **Nepo Driving** (Ride-Hailing) | <i class="fas fa-map-marked-alt mr-1"></i> **Explore Local** (Destination Discovery)</p>
                <hr class="my-1 border-gray-200">
                <p class="font-semibold text-teal-600">II. Health & Wellness:</p>
                <p class="ml-3"><i class="fas fa-hand-holding-medical mr-1"></i> **Nepo Care** (Health & Appoint. Tracking) | <i class="fas fa-hand-holding-heart mr-1"></i> **Nepo Donation** (Charitable Contributions)</p>
                <hr class="my-1 border-gray-200">
                <p class="font-semibold text-amber-600">III. Finance & Commerce:</p>
                <p class="ml-3"><i class="fas fa-wallet mr-1"></i> **My Wallet** (Digital Finance Hub) | <i class="fas fa-bag-shopping mr-1"></i> **Online Shopping** (Order Tracking)</p>
                <p class="ml-3"><i class="fas fa-tags mr-1"></i> **Second-Hand Market** (Community Listings)</p>
                <hr class="my-1 border-gray-200">
                <p class="font-semibold text-purple-600">V. Information & Utility:</p>
                <p class="ml-3"><i class="fas fa-newspaper mr-1"></i> **Nepo News** (Media Aggregation) | <i class="fas fa-calendar-days mr-1"></i> **Nepo Calendar** (Bikram Sambat Ref.)</p>
                <p class="ml-3"><i class="fas fa-briefcase mr-1"></i> **Part-Time Job** (Local Job Board) | <i class="fas fa-passport mr-1"></i> **Visa Check** (Status Verification)</p>
            </div>

            <h3 class="font-bold text-base text-gray-800 mb-2 text-left">3-Year Roadmap Rationale</h3>
            <div class="space-y-2 mb-6 text-sm text-left p-3 bg-red-50 rounded-xl border border-red-200">
                <p class="text-gray-700"><i class="fas fa-shield-alt mr-1 text-red-600"></i> **Security & Scalability:** Building robust infrastructure for mass adoption and financial regulatory compliance.</p>
                <p class="text-gray-700"><i class="fas fa-rocket mr-1 text-red-600"></i> **Real-Time Compliance:** Finalizing complex backend for secure instant transactions and driver matching (e.g., Nepo Driving, My Wallet).</p>
                <p class="text-gray-700"><i class="fas fa-user-check mr-1 text-red-600"></i> **Feature Maturity & UX:** Ensuring all 11 services are fully functional, interconnected, and simple for users of all digital literacy levels.</p>
            </div>

            <div class="text-gray-900 space-y-2 mb-4 p-4 bg-gray-100 rounded-xl shadow-inner text-left">
                <p class="text-lg font-bold text-center">Bipin Hamal</p>
                <p class="text-sm font-medium text-green-600 text-center mb-3">Visionary & IoT Student</p>
                
                <div class="text-xs space-y-1 text-gray-700 pt-2 border-t border-gray-200">
                    <p class="font-semibold mb-1">Academic Background:</p>
                    <p class="ml-2">Baekseok University, South Korea</p>
                    <p class="ml-2">Major: Internet of Things (IoT)</p>
                </div>

                <div class="text-xs space-y-1 text-gray-700 pt-2 border-t border-gray-200">
                    <p class="font-semibold mb-1">Contact:</p>
                    <p class="ml-2">bipinhamal2025@gmail.com</p>
                    <p class="ml-2">+82 10-6708-3312</p>
                </div>
            </div>
            <a href="mailto:bipinhamal2025@gmail.com?subject=Suggestion%20for%20Nepo%20Super%20App" class="mt-4 w-full py-3 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 transition duration-150 shadow-md flex items-center justify-center">
                <i class="fas fa-envelope mr-2"></i> Send Suggestion Email
            </a>
            
            <button onclick="document.getElementById('app-info-modal').classList.add('hidden')" class="mt-2 w-full py-3 bg-gray-200 text-gray-700 font-bold rounded-lg hover:bg-gray-300 transition duration-150 shadow-md">
                Close
            </button>
        </div>
    </div>

    <div id="message-box" class="fixed top-4 right-4 p-3 rounded-xl shadow-xl z-50 transition duration-300 opacity-0 pointer-events-none"></div>

</body>
</html>

